webpackJsonp([45],{OpvO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("bOdI"),n=a.n(l),o=a("BO1k"),c=a.n(o),s={name:"admin_fxbglb",data:function(){return{callTempletCheckFlag:!1,callTempletCheckForm:{tid:"",templetName:"",wavName:"",wavPath:"",sendContent:"",gatewayName:"",command:"",status:1},callTempletCheckOptions:[],tid:"",templetName:"",gatewayId:"",wavId:"",wavName:"",createUser:"",status:"",startDate:new Date,endDate:new Date,optionValue:"",pageNum:1,pageSize:30,sum:0,index:0,tableData:[],checkIn:!1,loading:!1,options:[{value:"1",label:"所有"},{value:"2",label:"可用"},{value:"3",label:"不可用"}]}},methods:{succeed:function(e){this.$message({message:e,type:"success"})},failed:function(e){this.$message.error(e)},callTempletCheck:function(e){this.callTempletCheckFlag=!0,this.callTempletCheckForm={id:e.id,gatewayId:e.gatewayId,tid:e.tid,templetName:e.templetName,wavName:e.wavName,wavPath:e.wavPath,wavId:e.wavId,sendContent:e.sendContent,gatewayName:e.gatewayName,command:e.command,status:e.status},this.callTempletCheckOptions=[];var t=this;this.postRequest("admin/getAvailableGateway",{}).then(function(e){var a=!0,l=!1,n=void 0;try{for(var o,s=c()(e.data.data.availableGateway);!(a=(o=s.next()).done);a=!0){var m=o.value;t.callTempletCheckOptions.push({key:m.gateway_id,label:m.gateway_name,value:m.gateway_id})}}catch(e){l=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw n}}})},saveCallTempletCheck:function(){this.callTempletCheckFlag=!1;var e=this;this.postRequest("admin/updateCallTempletCheck",{id:this.callTempletCheckForm.id,wavId:this.callTempletCheckForm.wavId,gatewayId:this.callTempletCheckForm.gatewayId,command:this.callTempletCheckForm.command,status:this.callTempletCheckForm.status}).then(function(t){t.data.success?e.succeed(t.data.message):e.failed(t.data.message)})},cancelCallTempletCheck:function(){this.callTempletCheckFlag=!1},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){console.log(this.formatDate(this.startDate)),this.tableData=[],this.checkIn=!0,this.loading=!0;var e=this;this.postRequest("admin/calltempletchecklist",{tid:this.tid,templetName:this.templetName,gatewayId:this.gatewayId,wavId:this.wavId,wavName:this.wavName,createUser:this.createUser,status:this.status,startDate:this.formatDate(this.startDate),endDate:this.formatDate(this.endDate),pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){e.loading=!1,e.sum=t.data.data.data.length;var a=!0,l=!1,o=void 0;try{for(var s,m=c()(t.data.data.data);!(a=(s=m.next()).done);a=!0){var r,i=s.value;e.tableData.push((r={index:e.index,tid:i.tid,templetName:i.templet_name,gatewayId:i.gateway_id,wavId:i.wav_id,wavName:i.wav_name,createUser:i.create_user,status:i.status,statusCn:1===i.status?"通过":"未通过",gatewayContent:i.gateway_content,wavPath:i.wav_path,sendContent:i.send_content,command:i.command},n()(r,"createUser",i.create_user),n()(r,"createTime",i.create_time),n()(r,"updateUser",i.update_user),n()(r,"updateTime",i.update_time),n()(r,"id",i.id),r)),e.index++}}catch(e){l=!0,o=e}finally{try{!a&&m.return&&m.return()}finally{if(l)throw o}}})},cancel:function(){}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{attrs:{"label-width":"120px",inline:"inline"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.checkData(t):null}}},[a("el-form-item",{attrs:{label:"模板编号："}},[a("el-input",{model:{value:e.tid,callback:function(t){e.tid=t},expression:"tid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板名称："}},[a("el-input",{model:{value:e.templetName,callback:function(t){e.templetName=t},expression:"templetName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"网关编号："}},[a("el-input",{model:{value:e.gatewayId,callback:function(t){e.gatewayId=t},expression:"gatewayId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"wav编号："}},[a("el-input",{model:{value:e.wavId,callback:function(t){e.wavId=t},expression:"wavId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户名："}},[a("el-input",{model:{value:e.createUser,callback:function(t){e.createUser=t},expression:"createUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{model:{value:e.optionValue,callback:function(t){e.optionValue=t},expression:"optionValue"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间："}},[a("el-date-picker",{attrs:{type:"date"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间："}},[a("el-date-picker",{attrs:{type:"date"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.checkData}},[e._v("查询")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"审核",visible:e.callTempletCheckFlag},on:{"update:visible":function(t){e.callTempletCheckFlag=t}}},[a("el-form",{ref:"form",attrs:{model:e.callTempletCheckForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"模板id：",prop:"tid"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.callTempletCheckForm.tid,callback:function(t){e.$set(e.callTempletCheckForm,"tid",t)},expression:"callTempletCheckForm.tid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板内容：",prop:"templetName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.callTempletCheckForm.templetName,callback:function(t){e.$set(e.callTempletCheckForm,"templetName",t)},expression:"callTempletCheckForm.templetName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"语音文件名：",prop:"wavName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.callTempletCheckForm.wavName,callback:function(t){e.$set(e.callTempletCheckForm,"wavName",t)},expression:"callTempletCheckForm.wavName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"语言文件路径：",prop:"wavPath"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.callTempletCheckForm.wavPath,callback:function(t){e.$set(e.callTempletCheckForm,"wavPath",t)},expression:"callTempletCheckForm.wavPath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送文本内容：",prop:"sendContent"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.callTempletCheckForm.sendContent,callback:function(t){e.$set(e.callTempletCheckForm,"sendContent",t)},expression:"callTempletCheckForm.sendContent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"可用网关："}},[a("el-select",{model:{value:e.callTempletCheckForm.gatewayName,callback:function(t){e.$set(e.callTempletCheckForm,"gatewayName",t)},expression:"callTempletCheckForm.gatewayName"}},e._l(e.callTempletCheckOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"命令：",prop:"command"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.callTempletCheckForm.command,callback:function(t){e.$set(e.callTempletCheckForm,"command",t)},expression:"callTempletCheckForm.command"}})],1),e._v(" "),a("el-form-item",[a("el-radio",{attrs:{label:"1"},model:{value:e.callTempletCheckForm.status,callback:function(t){e.$set(e.callTempletCheckForm,"status",t)},expression:"callTempletCheckForm.status"}},[e._v("通过")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.callTempletCheckForm.status,callback:function(t){e.$set(e.callTempletCheckForm,"status",t)},expression:"callTempletCheckForm.status"}},[e._v("不通过")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveCallTempletCheck("callTempletCheckForm")}}},[e._v("添加")]),e._v(" "),a("el-button",{on:{click:function(t){e.cancelCallTempletCheck("callTempletCheckForm")}}},[e._v("取消")])],1)],1),e._v(" "),e.checkIn?a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.callTempletCheck(t.row)}}},[e._v("审核")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statusCn",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tid",label:"模板编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"templetName",label:"模板名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewayId",label:"网关编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewayContent",label:"网关内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wavId",label:"wav编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wavName",label:"语音名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wavPath",label:"语音路径"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sendContent",label:"发送文本内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"command",label:"命令"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"客户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateUser",label:"审核人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"审核时间"}})],1),e._v(" "),a("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.pageNum,"page-size":[30,50],"page-size":e.pageSize,total:e.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t}}}),e._v(" "),a("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.sum)+"条，")])],1):e._e()],1)},staticRenderFns:[]};var r=a("VU/8")(s,m,!1,function(e){a("b1Vp")},"data-v-631e71c1",null);t.default=r.exports},b1Vp:function(e,t){}});