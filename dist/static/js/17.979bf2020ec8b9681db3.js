webpackJsonp([17],{W5vV:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("BO1k"),l=e.n(o),i={data:function(){return{dialogFormVisible:!1,modifyDataVisible:!1,rules:{gatewayId:[{required:!0,message:"不能为空",trigger:"blur"}],gatewayName:[{required:!0,message:"不能为空",trigger:"blur"}],gatewayContent:[{required:!0,message:"不能为空",trigger:"blur"}]},form:{gatewayId:"",gatewayName:"",gatewayContent:"",status:""},addGatewayOptions:[{key:0,value:0,label:"不可用"},{key:1,value:1,label:"可用"}],modifyDataForm:{id:"",gatewayName:"",gatewayContent:"",status:"",options:[{key:0,value:0,label:"不可用"},{key:1,value:1,label:"可用"}]},index:0,pageNum:1,pageSize:30,gatewayId:"",gatewayName:"",gatewayContent:"",status:99,sum:0,tableData:[],checkIn:!1,loading:!1,options:[{key:99,value:99,label:"所有"},{key:1,value:1,label:"可用"},{key:0,value:0,label:"不可用"}]}},methods:{succeed:function(t){this.$message({message:t,type:"success"})},failed:function(t){this.$message.error(t)},forbidData:function(t){var a=this;this.$confirm("此操作将禁用/启用网关："+t.gatewayName+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.postRequest("admin/startCallGateway",{id:t.id,status:0===t.status?1:0}).then(function(t){t.data.success?(a.succeed(t.data.message),a.checkData()):a.failed(t.data.message)})}).catch(function(){})},deleteDate:function(t){var a=this;this.$confirm("此操作将删除网关："+t.gatewayName+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.postRequest("admin/deleteCallGateway",{id:t.id}).then(function(t){t.data.success?(a.succeed(t.data.message),a.checkData()):a.failed(t.data.message)})}).catch(function(){})},modifyData:function(t){this.modifyDataVisible=!0,this.modifyDataForm.id=t.id,this.modifyDataForm.gatewayName=t.gatewayName,this.modifyDataForm.gatewayContent=t.gatewayContent,this.modifyDataForm.status=t.status},submitForm:function(t){var a=this;this.$refs[t].validate(function(t){if(!t)return!1;a.modifyDataVisible=!1;var e=a;a.postRequest("admin/updateCallGateway",{id:e.modifyDataForm.id,gatewayName:e.modifyDataForm.gatewayName,gatewayContent:e.modifyDataForm.gatewayContent,status:e.modifyDataForm.status}).then(function(t){t.data.success?(e.succeed(t.data.message),e.checkData()):e.failed(t.data.message)})})},resetForm:function(t){this.dialogFormVisible=!1,this.modifyDataVisible=!1,this.form={}},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){this.tableData=[],this.checkIn=!0,this.loading=!0;var t=this;this.postRequest("admin/callgatewaylist",{createUser:this.createUser,createTime:this.createTime,gatewayId:this.gatewayId,gatewayName:this.gatewayName,gatewayContent:this.gatewayContent,status:this.status,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(a){t.loading=!1,t.sum=a.data.data.page.totalCount;var e=!0,o=!1,i=void 0;try{for(var n,s=l()(a.data.data.data);!(e=(n=s.next()).done);e=!0){var r=n.value;t.tableData.push({index:t.index,createUser:r.create_user,createTime:r.create_time,gatewayId:r.gateway_id,gatewayName:r.gateway_name,gatewayContent:r.gateway_content,id:r.id,status:r.status,statusCn:0===r.status?"不可用":1===r.status?"可用":""}),t.index++}}catch(t){o=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(o)throw i}}})},addGateway:function(t){var a=this;this.$refs[t].validate(function(t){if(!t)return!1;var e=a;a.dialogFormVisible=!1,a.postRequest("admin/saveAddCallGateway",{gatewayId:a.form.gatewayId,gatewayName:a.form.gatewayName,gatewayContent:a.form.gatewayContent,status:a.form.status}).then(function(t){t.data.success?(e.succeed(t.data.message),e.checkData()):e.failed(t.data.message)})})}},mounted:function(){this.checkData()}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("el-button",{attrs:{type:"text"},on:{click:function(a){t.dialogFormVisible=!0}}},[t._v("+添加网关")]),t._v(" "),e("el-dialog",{attrs:{title:"添加网关",visible:t.dialogFormVisible},on:{"update:visible":function(a){t.dialogFormVisible=a}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"网关编号：",prop:"gatewayId"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"1-3协议;4-6供应商;7-9序号"},model:{value:t.form.gatewayId,callback:function(a){t.$set(t.form,"gatewayId",a)},expression:"form.gatewayId"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"网关名称：",prop:"gatewayName"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.gatewayName,callback:function(a){t.$set(t.form,"gatewayName",a)},expression:"form.gatewayName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"网关内容：",prop:"gatewayContent"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.gatewayContent,callback:function(a){t.$set(t.form,"gatewayContent",a)},expression:"form.gatewayContent"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"状态："}},[e("el-select",{model:{value:t.form.status,callback:function(a){t.$set(t.form,"status",a)},expression:"form.status"}},t._l(t.addGatewayOptions,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addGateway("form")}}},[t._v("添加")]),t._v(" "),e("el-button",{on:{click:function(a){t.resetForm("form")}}},[t._v("取消")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"修改信息",visible:t.modifyDataVisible},on:{"update:visible":function(a){t.modifyDataVisible=a}}},[e("el-form",{ref:"modifyDataForm",attrs:{model:t.modifyDataForm,rules:t.rules,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"网关名称：",prop:"gatewayName"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.modifyDataForm.gatewayName,callback:function(a){t.$set(t.modifyDataForm,"gatewayName",a)},expression:"modifyDataForm.gatewayName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"网关内容：",prop:"gatewayContent"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.modifyDataForm.gatewayContent,callback:function(a){t.$set(t.modifyDataForm,"gatewayContent",a)},expression:"modifyDataForm.gatewayContent"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"状态："}},[e("el-select",{model:{value:t.modifyDataForm.status,callback:function(a){t.$set(t.modifyDataForm,"status",a)},expression:"modifyDataForm.status"}},t._l(t.modifyDataForm.options,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.submitForm("modifyDataForm")}}},[t._v("保存")]),t._v(" "),e("el-button",{on:{click:function(a){t.resetForm("modifyDataForm")}}},[t._v("取消")])],1)],1),t._v(" "),e("el-form",{attrs:{"label-width":"120px",inline:"inline"}},[e("el-form-item",{attrs:{label:"网关编号："}},[e("el-input",{model:{value:t.gatewayId,callback:function(a){t.gatewayId=a},expression:"gatewayId"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"网关名称："}},[e("el-input",{model:{value:t.gatewayName,callback:function(a){t.gatewayName=a},expression:"gatewayName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"网关内容："}},[e("el-input",{model:{value:t.gatewayContent,callback:function(a){t.gatewayContent=a},expression:"gatewayContent"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"状态："}},[e("el-select",{model:{value:t.status,callback:function(a){t.status=a},expression:"status"}},t._l(t.options,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.checkData}},[t._v("查询")])],1)],1),t._v(" "),t.checkIn?e("el-card",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:t.tableData,stripe:""}},[e("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),e("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){t.forbidData(a.row)}}},[t._v(t._s(0===a.row.status?"启用":"禁用"))]),t._v(" "),e("el-button",{attrs:{type:"text"},on:{click:function(e){t.modifyData(a.row)}}},[t._v("修改信息")]),t._v(" "),e("el-button",{attrs:{type:"text"},on:{click:function(e){t.deleteDate(a.row)}}},[t._v("删除")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"gatewayId",label:"网关编号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"gatewayName",label:"网关名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"gatewayContent",label:"网关内容"}}),t._v(" "),e("el-table-column",{attrs:{prop:"statusCn",label:"状态"}}),t._v(" "),e("el-table-column",{attrs:{prop:"createUser",label:"创建人"}}),t._v(" "),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}})],1),t._v(" "),e("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":t.pageNum,"page-size":[30,50],"page-size":t.pageSize,total:t.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handlePageChange,"update:currentPage":function(a){t.pageNum=a},"update:pageSize":function(a){t.pageSize=a}}}),t._v(" "),e("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[t._v("共"+t._s(t.sum)+"条，")])],1):t._e()],1)},staticRenderFns:[]};var s=e("VU/8")(i,n,!1,function(t){e("h405")},"data-v-c1a13b80",null);a.default=s.exports},h405:function(t,a){}});