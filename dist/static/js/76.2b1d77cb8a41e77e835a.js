webpackJsonp([76],{bOgN:function(e,a){},tiaW:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("BO1k"),n=t.n(l),r={data:function(){return{spreadFlag:!1,delNodeFlag:!0,menuFlag:!1,urlFlag:!0,parentMenuNameFlag:!0,seqFlag:!0,isShowFlag:!0,isFastNavFlag:!0,form:{nodeData:{},menuNameCn:"",menuName:"",url:"",level:"",parentMenuName:"",seq:"",isShow:"",isFastNav:"",info:"",type:"customer_menu"},formLabelWidth:"120px",rules:{menuNameCn:[{required:!0,message:"不能为空",trigger:"blur"}],menuName:[{required:!0,message:"不能为空",trigger:"blur"}],url:[{required:!0,message:"不能为空",trigger:"blur"}],seq:[{required:!0,message:"不能为空",trigger:"blur"}]},isShowList:[{key:0,label:"否",value:0},{key:1,label:"是",value:1}],isFastNavList:[{key:0,label:"否",value:0},{key:1,label:"是",value:1}],indent:32,menuList:[],defaultProps:{children:"children",label:"label"}}},methods:{succeed:function(e){this.$message({message:e,type:"success"})},failed:function(e){this.$message.error(e)},saveMenu:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;var t=a,l=a.form.menuNameCn+","+a.form.menuName+","+a.form.level+","+a.form.parentMenuName+","+a.form.url+","+a.form.isShow+","+a.form.isFastNav+","+a.form.info+","+a.form.seq;a.postRequest("admin/saveAddAuthMenu",{type:a.form.type,params:l}).then(function(e){e.data.success?(t.succeed(e.data.data),t.checkData()):t.failed(e.data.data)}),a.menuFlag=!1})},modify:function(){this.delNodeFlag=!this.delNodeFlag,this.delNodeFlag&&this.checkData()},close:function(){this.$router.push({path:"/dashboard"})},handleNodeClick:function(e){if(console.log(e),"菜单列表"!==e.label){this.menuFlag=!0;switch(e.level){case 0:if(this.delNodeFlag){this.menuFlag=!0,this.urlFlag=!1,this.parentMenuNameFlag=!1,this.seqFlag=!0,this.isShowFlag=!0,this.isFastNavFlag=!0;break}case 1:this.menuFlag=!0,this.urlFlag=!1,this.parentMenuNameFlag=!1,this.seqFlag=!0,this.isShowFlag=!0,this.isFastNavFlag=!0;break;case 2:this.menuFlag=!0,this.urlFlag=!0,this.parentMenuNameFlag=!0,this.seqFlag=!0,this.isShowFlag=!0,this.isFastNavFlag=!0;break;case 3:this.menuFlag=!0,this.urlFlag=!1,this.parentMenuNameFlag=!0,this.seqFlag=!1,this.isShowFlag=!1,this.isFastNavFlag=!1;break;default:return}this.form.menuNameCn=e.menuNameCn,this.form.menuName=e.menuName,this.form.url=e.url,this.form.level=e.level,this.form.parentMenuName=e.parentMenuName,this.form.seq=e.seq,this.form.isShow=e.isShow,this.form.isFastNav=e.isFastNav,this.form.info=e.info}},remove:function(e,a){var t=this,l=this;this.$confirm("此操作将删除："+a.menuName+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.postRequest("admin/deleteAuthMenu",{menuName:a.menuName,level:a.level,type:"customer_menu"}).then(function(n){if(n.data.success){l.succeed(n.data.data),t.menuFlag=!1;var r=e.parent,i=r.data.children||r.data,s=i.findIndex(function(e){return e.menuName===a.menuName});i.splice(s,1)}else l.failed(n.data.data)})}).catch(function(){})},append:function(e){var a={label:"新增item",menuNameCn:"新增item",menuName:"customer_",level:e.level+1,parentMenuName:e.menuName,info:"",seq:e.seq,children:[]};e.children||this.$set(e,"children",[]),e.children.push(a)},checkData:function(){this.menuList=[{label:"菜单列表",menuNameCn:"菜单列表",level:0,seq:0,info:"",children:[]}];var e=[],a=[],t=[],l=this;this.postRequest("admin/listAuthMenuCustomer",{}).then(function(r){var i=!0,s=!1,o=void 0;try{for(var u,m=n()(r.data.data.menuList);!(i=(u=m.next()).done);i=!0){var f=u.value;1===f.level&&e.push(f),2===f.level&&a.push(f),0===f.level&&t.push(f)}}catch(e){s=!0,o=e}finally{try{!i&&m.return&&m.return()}finally{if(s)throw o}}var c=!0,d=!1,h=void 0;try{for(var v,p=n()(e);!(c=(v=p.next()).done);c=!0){var N=v.value;l.menuList[0].children.push({label:N.menuNameCn,menuNameCn:N.menuNameCn,menuName:N.menuName,url:N.url,level:N.level,parentMenuName:N.parentMenuName,seq:N.seq,isShow:N.isShow,isFastNav:N.isFastNav,info:N.info,children:[]})}}catch(e){d=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}var b=!0,g=!1,F=void 0;try{for(var y,w=n()(l.menuList[0].children);!(b=(y=w.next()).done);b=!0){var _=y.value,k=!0,C=!1,q=void 0;try{for(var M,x=n()(a);!(k=(M=x.next()).done);k=!0){var S=M.value;S.parentMenuName===_.menuName&&_.children.push({label:S.menuNameCn,menuNameCn:S.menuNameCn,menuName:S.menuName,url:S.url,level:S.level,parentMenuName:S.parentMenuName,seq:S.seq,isShow:S.isShow,isFastNav:S.isFastNav,info:S.info,children:[]})}}catch(e){C=!0,q=e}finally{try{!k&&x.return&&x.return()}finally{if(C)throw q}}}}catch(e){g=!0,F=e}finally{try{!b&&w.return&&w.return()}finally{if(g)throw F}}var L=!0,$=!1,W=void 0;try{for(var D,A=n()(l.menuList[0].children);!(L=(D=A.next()).done);L=!0){var B=D.value,O=!0,R=!1,P=void 0;try{for(var z,T=n()(B.children);!(O=(z=T.next()).done);O=!0){var j=z.value,E=!0,I=!1,J=void 0;try{for(var U,V=n()(t);!(E=(U=V.next()).done);E=!0){var G=U.value;G.parentMenuName===j.menuName&&j.children.push({label:G.menuNameCn,menuNameCn:G.menuNameCn,menuName:G.menuName,url:G.url,level:3,parentMenuName:G.parentMenuName,seq:G.seq,isShow:G.isShow,isFastNav:G.isFastNav,info:G.info,children:[]})}}catch(e){I=!0,J=e}finally{try{!E&&V.return&&V.return()}finally{if(I)throw J}}}}catch(e){R=!0,P=e}finally{try{!O&&T.return&&T.return()}finally{if(R)throw P}}}}catch(e){$=!0,W=e}finally{try{!L&&A.return&&A.return()}finally{if($)throw W}}})}},mounted:function(){this.checkData()}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"wrapper"},[t("div",{staticClass:"mainContainer"},[t("div",{staticClass:"sideBar",attrs:{width:"25%",height:"80%"}},[t("el-tree",{attrs:{"expand-on-click-node":e.spreadFlag,"highlight-current":"",data:e.menuList,props:e.defaultProps,"default-expand-all":"",indent:e.indent},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.node,n=a.data;return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(l.label))]),e._v(" "),e.delNodeFlag||4===l.level?e._e():t("span",[t("i",{staticClass:"el-icon-plus blue",attrs:{type:"text",size:"mini"},on:{click:function(){return e.append(n)}}})]),e._v(" "),e.delNodeFlag?e._e():t("span",[t("i",{staticClass:"el-icon-delete red",attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(l,n)}}})])])}}])})],1),e._v(" "),t("div",{staticClass:"content"},[e.menuFlag?t("div",{staticClass:"formWrap"},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"菜单名称：","label-width":e.formLabelWidth,prop:"menuNameCn"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.menuNameCn,callback:function(a){e.$set(e.form,"menuNameCn",a)},expression:"form.menuNameCn"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"菜单简称：","label-width":e.formLabelWidth,prop:"menuName"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.menuName,callback:function(a){e.$set(e.form,"menuName",a)},expression:"form.menuName"}})],1),e._v(" "),e.urlFlag?t("el-form-item",{attrs:{label:"url：","label-width":e.formLabelWidth,prop:"url"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.url,callback:function(a){e.$set(e.form,"url",a)},expression:"form.url"}})],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"级别：","label-width":e.formLabelWidth,prop:"level"}},[t("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.level,callback:function(a){e.$set(e.form,"level",a)},expression:"form.level"}})],1),e._v(" "),e.parentMenuNameFlag?t("el-form-item",{attrs:{label:"父菜单：","label-width":e.formLabelWidth,prop:"parentMenuName"}},[t("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.parentMenuName,callback:function(a){e.$set(e.form,"parentMenuName",a)},expression:"form.parentMenuName"}})],1):e._e(),e._v(" "),e.seqFlag?t("el-form-item",{attrs:{label:"序号：","label-width":e.formLabelWidth,prop:"seq"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.seq,callback:function(a){e.$set(e.form,"seq",a)},expression:"form.seq"}})],1):e._e(),e._v(" "),e.isShowFlag?t("el-form-item",{attrs:{label:"是否显示："}},[t("el-select",{model:{value:e.form.isShow,callback:function(a){e.$set(e.form,"isShow",a)},expression:"form.isShow"}},e._l(e.isShowList,function(e){return t("el-option",{key:e.key,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),e.isFastNavFlag?t("el-form-item",{attrs:{label:"快速导航："}},[t("el-select",{model:{value:e.form.isFastNav,callback:function(a){e.$set(e.form,"isFastNav",a)},expression:"form.isFastNav"}},e._l(e.isFastNavList,function(e){return t("el-option",{key:e.key,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"备注：","label-width":e.formLabelWidth,prop:"info"}},[t("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.form.info,callback:function(a){e.$set(e.form,"info",a)},expression:"form.info"}})],1)],1),e._v(" "),t("hr"),e._v(" "),t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(a){e.saveMenu("form")}}},[e._v("更新菜单")])],1):e._e()])]),e._v(" "),t("div",{staticClass:"footer"},[t("div",{staticClass:"buttonWrap"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.modify("form")}}},[e._v(e._s(e.delNodeFlag?"编辑":"退出编辑"))]),e._v(" "),t("el-button",{on:{click:function(a){e.close("form")}}},[e._v("关闭")])],1)])])},staticRenderFns:[]};var s=t("VU/8")(r,i,!1,function(e){t("bOgN")},"data-v-2d9b1a06",null);a.default=s.exports}});