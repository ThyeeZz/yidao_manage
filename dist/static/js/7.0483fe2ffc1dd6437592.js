webpackJsonp([7],{ap32:function(e,t){},"t/5P":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("BO1k"),r=a.n(l),o={data:function(){return{updateRemarkForm:{userName:"",remark:""},updateRemarkFlage:!1,userName:"",type:"",opttype:"",fmmddhms:"",tmmddhms:"",id:"",cusOptions:[{key:0,label:"所有",value:""},{key:1,label:"客户",value:1},{key:2,label:"代理商",value:2}],optOptions:[{key:0,label:"所有",value:""},{key:1,label:"赠送",value:1},{key:2,label:"补款",value:2},{key:3,label:"扣款",value:3},{key:4,label:"审核退费",value:4}],index:0,pageNum:1,pageSize:30,sum:0,tableData:[],checkIn:!1,loading:!1}},methods:{succeed:function(e){this.$message({message:e,type:"success"})},failed:function(e){this.$message.error(e)},updateRemark:function(e){this.updateRemarkFlage=!0,this.updateRemarkForm={userName:e.userName,remark:e.remark,id:e.id},this.postRequest("/admin/updateBalanceOptRemark",{id:e.id}).then(function(e){})},saveUpdateRemark:function(e){this.updateRemarkFlage=!1;var t=this;this.postRequest("/admin/saveBalanceOptRemark",{id:this.updateRemarkForm.id,remark:this.updateRemarkForm.remark}).then(function(e){console.log(e),e.data.success?(t.succeed(e.data.data),t.checkData()):t.failed(e.data.resultMsg)})},resetForm:function(e){this.updateRemarkForm={},this.updateRemarkFlage=!1},exportRecord:function(){var e=this;this.postRequest("/admin/exportBalanceOptRecord",{userName:this.userName,opttype:this.opttype,type:this.type,fmmddhms:this.formatDate(this.fmmddhms),tmmddhms:this.formatDate(this.tmmddhms),pageSize:this.pageSize,pageNum:this.pageNum}).then(function(t){t.data.success?e.succeed(t.data.data):e.failed("导出失败")})},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){this.tableData=[],this.checkIn=!0,this.loading=!0;var e=this;this.postRequest("/admin/listBalanceOptRecord",{userName:this.userName,opttype:this.opttype,type:this.type,fmmddhms:this.formatDate(this.fmmddhms),tmmddhms:this.formatDate(this.tmmddhms),pageSize:this.pageSize,pageNum:this.pageNum}).then(function(t){e.loading=!1,e.sum=t.data.data.page.totalCount;var a=!0,l=!1,o=void 0;try{for(var n,s=r()(t.data.data.data);!(a=(n=s.next()).done);a=!0){var i=n.value;e.tableData.push({index:e.index,userName:i.userName,typeCn:i.typeCn,type:i.type,opttypeCn:i.opttypeCn,opttype:i.opttype,amount:i.amount?i.amount/1e4:0,beforebalance:i.beforebalance?i.beforebalance/1e4:0,afterbalance:Number(i.afterbalance/1e4)?Number(i.afterbalance/1e4):0,oper:i.oper,opertime:i.opertime,remark:i.remark,id:i.id}),e.index++}}catch(e){l=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw o}}})}},mounted:function(){this.checkData()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-dialog",{attrs:{title:"修改备注",visible:e.updateRemarkFlage},on:{"update:visible":function(t){e.updateRemarkFlage=t}}},[a("el-form",{ref:"form",attrs:{model:e.updateRemarkForm,"label-width":"120px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.checkData(t):null}}},[a("el-form-item",{attrs:{label:"客户账号："}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.updateRemarkForm.userName,callback:function(t){e.$set(e.updateRemarkForm,"userName",t)},expression:"updateRemarkForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.updateRemarkForm.remark,callback:function(t){e.$set(e.updateRemarkForm,"remark",t)},expression:"updateRemarkForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveUpdateRemark("updateRemarkForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("updateRemarkForm")}}},[e._v("取消")])],1)],1),e._v(" "),a("el-form",{attrs:{"label-width":"120px",inline:"inline"}},[a("el-form-item",{attrs:{label:"账号："}},[a("el-input",{model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户类型："}},[a("el-select",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.cusOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"操作类型："}},[a("el-select",{model:{value:e.opttype,callback:function(t){e.opttype=t},expression:"opttype"}},e._l(e.optOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间："}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.fmmddhms,callback:function(t){e.fmmddhms=t},expression:"fmmddhms"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间："}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.tmmddhms,callback:function(t){e.tmmddhms=t},expression:"tmmddhms"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.checkData}},[e._v("查询")])],1)],1),e._v(" "),e.checkIn?a("el-card",[a("el-button",{attrs:{type:"text"},on:{click:e.exportRecord}},[e._v("+导出")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.updateRemark(t.row)}}},[e._v("修改备注")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeCn",label:"客户类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"opttypeCn",label:"操作类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"操作金额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"beforebalance",label:"操作前余额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"afterbalance",label:"操作后余额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"oper",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"opertime",label:"操作时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"操作备注"}})],1),e._v(" "),a("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.pageNum,"page-size":[30,50],"page-size":e.pageSize,total:e.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t}}}),e._v(" "),a("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.sum)+"条，")])],1):e._e()],1)},staticRenderFns:[]};var s=a("VU/8")(o,n,!1,function(e){a("ap32")},"data-v-f97330e4",null);t.default=s.exports}});