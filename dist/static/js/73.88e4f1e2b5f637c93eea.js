webpackJsonp([73],{"+2oJ":function(e,a){},"+zXM":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("BO1k"),n=t.n(r),i={name:"admin_fxbglb",data:function(){return{options:[],gatewayList:[],remindGatewayError:{gateway:"",gatewayName:"",sendErrorCount:"",mailUrl:"",id:""},rules:{sendErrorCount:[{required:!0,message:"不能为空",trigger:"blur"}],mailUrl:[{required:!0,message:"不能为空",trigger:"blur"}]},formLabelWidth:"120px",dialogFormVisible:!1,modifyDataVisible:!1,gateway:"",gatewayName:"",sendErrorCount:"",mailUrl:"",status:"",createUserName:"",createDate:"",index:0,pageNum:1,pageSize:30,sum:0,tableData:[],checkIn:!0,loading:!1}},methods:{modifyData:function(e){this.remindGatewayError={};var a=this;this.modifyDataVisible=!0,this.remindGatewayError.gateway=e.gateway,this.remindGatewayError.gatewayName=e.gatewayName,this.remindGatewayError.sendErrorCount=e.sendErrorCount,this.remindGatewayError.mailUrl=e.mailUrl,this.postRequest("admin/updateRemindGatewayError",{gateway:e.gateway}).then(function(e){a.remindGatewayError.id=e.data.data.remindGatewayError.id})},deleteDate:function(e){var a=this,t=this;this.$confirm("此操作将删除通道提交失败："+e.gatewayName+" 的提醒 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/deleteRemindGatewayError",{id:e.id}).then(function(e){e.data.success?(a.succeed(e.data.data),a.getData()):a.failed(e.data.data)})}).catch(function(){})},changeStatus:function(e){var a=this;this.$confirm("此操作将禁用网关："+e.gatewayName+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.postRequest("admin/changeGatewayErrorStatus",{id:e.id,status:1===e.status?0:1}).then(function(e){if(e.data.success){a.succeed(e.data.data),a.getData();var t=!0,r=!1,i=void 0;try{for(var o,l=n()(a.tableData);!(t=(o=l.next()).done);t=!0){o.value;return}}catch(e){r=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw i}}}else a.failed(e.data.data)})}).catch(function(){})},submitForm:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.modifyDataVisible=!1;var t=a;a.postRequest("admin/saveUpdateRemindGatewayError",{remindGatewayError:a.remindGatewayError}).then(function(e){e.data.success?(t.succeed(e.data.data),t.getData()):t.failed(e.data.data)})})},resetForm:function(e){this.modifyDataVisible=!1},succeed:function(e){this.$message({message:e,type:"success"})},failed:function(e){this.$message.error(e)},saveAdd:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.dialogFormVisible=!1;var t=!0,r=!1,i=void 0;try{for(var o,l=n()(a.gatewayList);!(t=(o=l.next()).done);t=!0){var s=o.value;a.remindGatewayError.gatewayName===s.gatewayname&&(a.remindGatewayError.gateway=s.gateway)}}catch(e){r=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw i}}var d=a;a.postRequest("admin/saveAddRemindGatewayError",{remindGatewayError:a.remindGatewayError}).then(function(e){e.data.success?(d.succeed(e.data.data),d.getData()):d.failed(e.data.resultMsg)}),a.remindGatewayError={gateway:"",gatewayName:"",sendErrorCount:"",mailUrl:"",id:""}})},cancelAdd:function(e){this.dialogFormVisible=!1,this.remindGatewayError={gateway:"",gatewayName:"",sendErrorCount:"",mailUrl:"",id:""}},addRemind:function(){this.dialogFormVisible=!0;var e=this;this.postRequest("admin/addRemindGatewayError",null).then(function(a){e.gatewayList=a.data.data.gatewayList;var t=!0,r=!1,i=void 0;try{for(var o,l=n()(a.data.data.gatewayList);!(t=(o=l.next()).done);t=!0){var s=o.value;s.gatewayname&&e.options.push({value:s.gatewayname,label:s.gateway+"_"+s.gatewayname,index:e.index}),e.index++}}catch(e){r=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw i}}})},handleSizeChange:function(){this.getData()},handlePageChange:function(){this.getData()},getData:function(){this.tableData=[],this.loading=!0;var e=this;this.postRequest("admin/listRemindGatewayError",{gateway:this.gateway,gatewayName:this.gatewayName,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(a){e.loading=!1,e.sum=a.data.data.page.totalCount;var t=!0,r=!1,i=void 0;try{for(var o,l=n()(a.data.data.rublist);!(t=(o=l.next()).done);t=!0){var s=o.value;e.tableData.push({index:e.index,gateway:s.gateway,gatewayName:s.gatewayName,sendErrorCount:s.sendErrorCount,mailUrl:s.mailUrl,status:s.status,statusCn:0===s.status?"启用":"禁用",createUserName:s.createUserName,createDate:s.createDate,createAccountID:s.createAccountID,id:s.id}),e.index++}}catch(e){r=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw i}}}),console.log()},cancel:function(){}},mounted:function(){this.getData()}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("el-button",{attrs:{type:"text"},on:{click:e.addRemind}},[e._v("+添加通道提交失败提醒")]),e._v(" "),t("el-dialog",{attrs:{title:"添加通道提交失败提醒",visible:e.dialogFormVisible},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[t("el-form",{ref:"remindGatewayError",attrs:{model:e.remindGatewayError,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"通道名称："}},[t("el-select",{model:{value:e.remindGatewayError.gatewayName,callback:function(a){e.$set(e.remindGatewayError,"gatewayName",a)},expression:"remindGatewayError.gatewayName"}},e._l(e.options,function(e){return t("el-option",{key:e.index,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"提醒阈值：","label-width":e.formLabelWidth,prop:"sendErrorCount"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.remindGatewayError.sendErrorCount,callback:function(a){e.$set(e.remindGatewayError,"sendErrorCount",a)},expression:"remindGatewayError.sendErrorCount"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"提醒邮箱：","label-width":e.formLabelWidth,prop:"mailUrl"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"邮箱之间请用英文逗号分割"},model:{value:e.remindGatewayError.mailUrl,callback:function(a){e.$set(e.remindGatewayError,"mailUrl",a)},expression:"remindGatewayError.mailUrl"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.saveAdd("remindGatewayError")}}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:function(a){e.cancelAdd("remindGatewayError")}}},[e._v("取消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"添加通道提交失败提醒",visible:e.modifyDataVisible},on:{"update:visible":function(a){e.modifyDataVisible=a}}},[t("el-form",{ref:"remindGatewayError",attrs:{model:e.remindGatewayError,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"通道名称："}},[t("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.remindGatewayError.gatewayName,callback:function(a){e.$set(e.remindGatewayError,"gatewayName",a)},expression:"remindGatewayError.gatewayName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"提醒阈值：","label-width":e.formLabelWidth,prop:"sendErrorCount"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.remindGatewayError.sendErrorCount,callback:function(a){e.$set(e.remindGatewayError,"sendErrorCount",a)},expression:"remindGatewayError.sendErrorCount"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"提醒邮箱：","label-width":e.formLabelWidth,prop:"mailUrl"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"邮箱之间请用英文逗号分割"},model:{value:e.remindGatewayError.mailUrl,callback:function(a){e.$set(e.remindGatewayError,"mailUrl",a)},expression:"remindGatewayError.mailUrl"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.submitForm("remindGatewayError")}}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:function(a){e.resetForm("remindGatewayError")}}},[e._v("取消")])],1)],1),e._v(" "),t("el-form",{attrs:{"label-width":"120px",inline:"inline"},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.checkData(a):null}}},[t("el-form-item",{attrs:{label:"通道名："}},[t("el-input",{model:{value:e.gatewayName,callback:function(a){e.gatewayName=a},expression:"gatewayName"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.getData}},[e._v("查询")])],1)],1),e._v(" "),e.checkIn?t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),t("el-table-column",{attrs:{prop:"oprations",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.changeStatus(a.row)}}},[e._v(e._s(a.row.status?"启用":"禁用"))]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.modifyData(a.row)}}},[e._v("修改信息")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.deleteDate(a.row)}}},[e._v("删除")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"gateway",label:"通道编号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"gatewayName",label:"通道名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sendErrorCount",label:"提交失败提醒阈值\n"}}),e._v(" "),t("el-table-column",{attrs:{prop:"mailUrl",label:"邮箱地址"}}),e._v(" "),t("el-table-column",{attrs:{prop:"statusCn",label:"状态"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createUserName",label:"创建人"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createDate",label:"创建时间"}})],1),e._v(" "),t("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.pageNum,"page-size":[30,50],"page-size":e.pageSize,total:e.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(a){e.pageNum=a},"update:pageSize":function(a){e.pageSize=a}}}),e._v(" "),t("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.sum)+"条，")])],1):e._e()],1)},staticRenderFns:[]};var l=t("VU/8")(i,o,!1,function(e){t("+2oJ")},"data-v-2f97a4fd",null);a.default=l.exports}});