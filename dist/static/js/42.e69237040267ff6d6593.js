webpackJsonp([42],{ZEQ4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),n=a.n(s),l={data:function(){return{submitSum:0,submitSucSum:0,reportSucSum:0,reportUnknowSum:0,userName:"",agentName:"",month:new Date,isFirst:!1,index:0,pageNum:1,pageSize:30,sum:0,sumPage:0,tableData:[],checkIn:!1,loading:!1}},methods:{succeed:function(){this.$message({message:"导出成功",type:"success"})},failed:function(){this.$message.error("导出失败")},exportData:function(){var t=this;this.postRequest("/admin/exportCustomerFeeMonthReport",{userName:this.userName,agentName:this.agentName,month:this.formatDate(this.month),isFirst:this.isFirst,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(e){e.data.success?t.succeed():t.failed()})},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){this.tableData=[],this.checkIn=!0,this.loading=!0;var t=this;this.postRequest("/admin/listCustomerFeeMonthReport",{userName:this.userName,agentName:this.agentName,month:this.formatDate(this.month),isFirst:this.isFirst,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(e){console.log(e),t.loading=!1,t.sum=e.data.data.page.totalCount,t.submitSum=e.data.data.commonSum.submitSum,t.submitSucSum=e.data.data.commonSum.submitSucSum,t.reportSucSum=e.data.data.commonSum.reportSucSum,t.reportUnknowSum=e.data.data.commonSum.reportUnknowSum,t.sumPage=Math.ceil(e.data.data.page.totalCount/t.pageSize);var a=!0,s=!1,l=void 0;try{for(var u,i=n()(e.data.data.data);!(a=(u=i.next()).done);a=!0){var o=u.value;t.tableData.push({index:t.index,id:o.id,userName:o.userName,agentName:o.agentName,customerSubmitSum:o.customerSubmitSum,gatewaySubmitSum:o.gatewaySubmitSum,gatewaySubmitSuccess:o.gatewaySubmitSuccess,gatewaySubmitFailed:o.gatewaySubmitFailed,gatewaySubmitSuccessRate:(100*o.gatewaySubmitSuccessRate).toFixed(4)+"%",gatewayReportSum:o.gatewayReportSum,gatewayReportSuccess:o.gatewayReportSuccess,gatewayReportFailed:o.gatewayReportFailed,platSubmitFailed:o.customerSubmitSum-o.gatewaySubmitSum,gatewayReportUnknow:o.gatewayReportUnknow,gatewayReportSuccessRate:(100*o.gatewayReportSuccessRate).toFixed(4)+"%",gatewayReportReturnRate:(100*o.gatewayReportReturnRate).toFixed(4)+"%",statMonth:o.statMonth,created:o.created,updated:o.updated}),t.index++}}catch(t){s=!0,l=t}finally{try{!a&&i.return&&i.return()}finally{if(s)throw l}}})},cancel:function(){}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-form",{attrs:{"label-width":"120px",inline:"inline"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.checkData(e):null}}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"代理商"}},[a("el-input",{model:{value:t.agentName,callback:function(e){t.agentName=e},expression:"agentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"按月"}},[a("el-date-picker",{attrs:{type:"month",placeholder:"选择月"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.checkData}},[t._v("查询")])],1)],1),t._v(" "),t.checkIn?a("el-card",[a("el-button",{attrs:{type:"text"},on:{click:t.exportData}},[t._v("+导出")]),t._v(" "),a("div",{staticClass:"dataWrap"},[a("span",{staticClass:"count"},[t._v("消费数：\n      "),a("span",{staticClass:"data"},[t._v(t._s(t.submitSum))])]),t._v(" "),a("span",{staticClass:"count"},[t._v("提交成功数：\n      "),a("span",{staticClass:"data"},[t._v(t._s(t.submitSucSum))])]),t._v(" "),a("span",{staticClass:"count"},[t._v("报告成功数：\n      "),a("span",{staticClass:"data"},[t._v(t._s(t.reportSucSum))])]),t._v(" "),a("span",{staticClass:"count"},[t._v("报告未知数：\n      "),a("span",{staticClass:"data"},[t._v(t._s(t.reportUnknowSum))])])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"agentName",label:"代理商"}}),t._v(" "),a("el-table-column",{attrs:{prop:"customerSubmitSum",label:"消费数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"platSubmitFailed",label:"平台提交失败"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewaySubmitSum",label:"网关提交数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewaySubmitSuccess",label:"提交成功数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewaySubmitFailed",label:"提交失败数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewaySubmitSuccessRate",label:"提交成功率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportSum",label:"网关报告数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportSuccess",label:"报告成功"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportFailed",label:"报告失败"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportUnknow",label:"报告未知"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportSuccessRate",label:"报告成功率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportReturnRate",label:"报告返回率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"statMonth",label:"统计时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updated",label:"更新时间"}})],1),t._v(" "),a("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":t.pageNum,"page-size":[30,50],"page-size":t.pageSize,total:t.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handlePageChange,"update:currentPage":function(e){t.pageNum=e},"update:pageSize":function(e){t.pageSize=e}}}),t._v(" "),a("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[t._v("共"+t._s(t.sum)+"条，")])],1):t._e()],1)},staticRenderFns:[]};var i=a("VU/8")(l,u,!1,function(t){a("tLHB")},"data-v-685b8d10",null);e.default=i.exports},tLHB:function(t,e){}});