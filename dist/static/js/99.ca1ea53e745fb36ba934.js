webpackJsonp([99],{hD9V:function(e,t){},pLtg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("BO1k"),l=a.n(o),r={data:function(){return{deptList:[{label:"部门列表",deptName:"部门列表",seq:0,children:[]}],defaultProps:{children:"children",label:"label"},form:{id:"",deptName:"",pdeptName:"",seq:"",note:""},menuFlag:!1,formLabelWidth:"120px",rules:{deptName:[{required:!0,message:"不能为空",trigger:"blur"}],seq:[{required:!0,message:"不能为空",trigger:"blur"}]}}},methods:{handleNodeClick:function(e){this.menuFlag=!0,this.form={id:e.id,deptName:e.deptName,pdeptName:"",seq:e.seq,note:e.note}},saveMenu:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.menuFlag=!1;var a=t,o=t.form.deptName+","+t.form.pdeptName+","+t.form.note+","+t.form.seq+","+t.form.id;t.postRequest("admin/saveAddDept",{params:o}).then(function(e){e.data.success?a.succeed("保存成功"):a.failed("保存失败")})})},succeed:function(e){this.$message({message:e,type:"success"})},failed:function(e){this.$message.error(e)},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){var e=this;this.postRequest("admin/listDept",{}).then(function(t){console.log(t);var a=!0,o=!1,r=void 0;try{for(var i,n=l()(t.data.data.deptList);!(a=(i=n.next()).done);a=!0){var s=i.value;e.deptList[0].children.push({label:s.deptName,deptName:s.deptName,id:s.id,pdeptId:s.pdeptId,seq:s.seq,zid:s.zid,zpid:s.zpid,note:s.note,children:[]})}}catch(e){o=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw r}}})},cancel:function(){}},mounted:function(){this.checkData()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"sideBar",attrs:{width:"25%",heiht:"100%"}},[a("el-tree",{attrs:{data:e.deptList,props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("div",{staticClass:"content"},[e.menuFlag?a("div",{staticClass:"formWrap",attrs:{width:"75%",heiht:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"部门编号：","label-width":e.formLabelWidth,prop:"id"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门名称：","label-width":e.formLabelWidth,prop:"deptName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.deptName,callback:function(t){e.$set(e.form,"deptName",t)},expression:"form.deptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级部门：","label-width":e.formLabelWidth,prop:"pdeptName"}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0,placeholder:"一级部门置空"},model:{value:e.form.pdeptName,callback:function(t){e.$set(e.form,"pdeptName",t)},expression:"form.pdeptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"序号：","label-width":e.formLabelWidth,prop:"seq"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.seq,callback:function(t){e.$set(e.form,"seq",t)},expression:"form.seq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注：","label-width":e.formLabelWidth,prop:"note"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),e._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.saveMenu("form")}}},[e._v("更新菜单")])],1):e._e()])])},staticRenderFns:[]};var n=a("VU/8")(r,i,!1,function(e){a("hD9V")},"data-v-1552ff7c",null);t.default=n.exports}});