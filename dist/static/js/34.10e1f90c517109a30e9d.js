webpackJsonp([34],{gA8J:function(e,a){},jMJh:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("BO1k"),i=t.n(s),l={name:"admin_dshkhlb",data:function(){return{isShowSubmitButton:!1,userName:"",isCheck:"",saleName:"",options:[{label:"所有",value:""},{label:"未审核",value:0},{label:"审核通过",value:1},{label:"审核拒绝",value:2}],pageNum:1,pageSize:30,sum:0,index:0,tableData:[],checkIn:!1,addClientDataFlag:!1,saveAddClientDataFlag:!1,addClientData:{id:"",userName:"",companyName:"",agentName:"SYS",agentID:1e5,source:"",accountTpye:"",saleName:"",unitprice:"",nickName:"",mobile:"",businessLicense:"",contract:"",address:"",phone:"",qq:"",mail:"",accountID:"",isPCN:"",ischeckCn:"",remarks:""},saveAddClientData:{userName:"",companyName:"",isPCN:"",ischeckCn:"",source:"",accountTpye:"",saleName:"",unitprice:"",nickName:"",mobile:"",businessLicense:"",contract:"",address:"",phone:"",qq:"",mail:"",remarks:"",agentID:1e5,agentName:"SYS"},rule1:{userName:[{required:!0,message:"请输入客户用户名",trigger:"blur"}],companyName:[{required:!0,message:"请输入公司名称",trigger:"blur"}],saleName:[{required:!0,message:"请选择指定销售",trigger:"change"}],nickName:[{required:!0,message:"请输入联系人",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"}],address:[{required:!0,message:"请输入联系地址",trigger:"blur"}],unitprice:[{required:!0,message:"请输入单价",trigger:"blur"},{type:"number",min:0,message:"请输入数字"}]},sourceOpt:[{value:1,label:"web客户"},{value:2,label:"普通接口"},{value:3,label:"cmpp客户"},{value:31,label:"sgip客户"},{value:32,label:"smgp客户"}],accountTypeOpt:[{value:1,label:"行业短信"},{value:2,label:"营销短信"}],saleNameOpt:[]}},methods:{succeed:function(e){this.$message({message:e,type:"success"})},failed:function(e){this.$message.error(e)},show:function(e){console.log(e),this.saveAddClientDataFlag=!0,this.saveAddClientData.companyName=e.companyName,this.saveAddClientData.isPCN=1==e.isPCN?"是":"否",this.saveAddClientData.ischeckCn=e.ischeckCn,this.saveAddClientData.ischeckCn=e.ischeckCn,this.saveAddClientData.source=1===e.source?"web客户":1===e.source?"普通客户":"cmpp客户",this.saveAddClientData.accountTpye=1==e.accountTpye?"行业短信":"营销短信",this.saveAddClientData.saleName=e.saleName,this.saveAddClientData.unitprice=e.unitprice,this.saveAddClientData.nickName=e.nickName,this.saveAddClientData.mobile=e.mobile,this.saveAddClientData.businessLicense=e.businessLicense,this.saveAddClientData.contract=e.contract,this.saveAddClientData.address=e.address,this.saveAddClientData.phone=e.phone,this.saveAddClientData.qq=e.qq,this.saveAddClientData.mail=e.mail,this.saveAddClientData.remarks=e.remarks,this.saveAddClientData.id=e.id,this.saveAddClientData.agentID=e.agentID},modifyData:function(e){console.log(e)},getSaleList:function(){var e=this;this.postRequest("admin/listAllEmployee",{t:""}).then(function(a){console.log(a),e.saleNameOpt=[];var t=!0,s=!1,l=void 0;try{for(var n,d=i()(a.data.data);!(t=(n=d.next()).done);t=!0){var c=n.value;e.saleNameOpt.push({value:c.userName,label:c.userName+"("+c.nickName+")"})}}catch(e){s=!0,l=e}finally{try{!t&&d.return&&d.return()}finally{if(s)throw l}}})},submitAddClientData:function(){var e=this;this.saveAddClientDataFlag=!1;var a=this;this.$refs.addClientForm.validate(function(t){if(!t)return!1;e.postRequest("admin/saveAddCustomer",{userName:e.saveAddClientData.userName,companyName:e.saveAddClientData.companyName,isPCN:e.saveAddClientData.isPCN,ischeckCn:e.saveAddClientData.ischeckCn,source:e.saveAddClientData.source,accountType:e.saveAddClientData.accountTpye,saleName:e.saveAddClientData.saleName,unitprice:1e4*e.saveAddClientData.unitprice,nickName:e.saveAddClientData.nickName,mobile:e.saveAddClientData.mobile,businessLicense:e.saveAddClientData.businessLicense,contract:e.saveAddClientData.contract,address:e.saveAddClientData.address,phone:e.saveAddClientData.phone,qq:e.saveAddClientData.qq,mail:e.saveAddClientData.mail,remarks:e.saveAddClientData.remarks,id:e.saveAddClientData.id,agentID:1e5,agentName:"SYS"}).then(function(e){e.data.success?(a.succeed(e.data.message),a.checkData()):a.failed(e.data.message),console.log(a.saveAddClientData)})})},handleClose:function(){this.addClientData={userName:"",companyName:"",agentName:"",agentID:"",source:"",accountTpye:"",saleName:"",unitprice:"",nickName:"",mobile:"",businessLicense:"",contract:"",address:"",phone:"",qq:"",mail:"",accountID:"",isPCN:"",ischeckCn:"",remarks:""}},businessLicenseChange2:function(e){var a=this;this.formData.set("file",e.file),this.postRequest("admin/uploadContractFile",this.formData).then(function(e){a.addClientData.businessLicense=e.data.message.match(/{"filePath":"(\S*)","/)[1]})},contractChange2:function(e){var a=this;this.formData.set("file",e.file),this.postRequest("admin/uploadContractFile",this.formData).then(function(e){a.addClientData.contract=e.data.message.match(/{"filePath":"(\S*)","/)[1]})},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){this.tableData=[],this.checkIn=!0,this.loading=!0;var e=this;this.postRequest("admin/listAllSaleCustomerInfo",{userName:this.userName,isCheck:this.isCheck,saleName:this.saleName}).then(function(a){e.loading=!1,e.sum=a.data.data.page.totalCount;var t=!0,s=!1,l=void 0;try{for(var n,d=i()(a.data.data.data);!(t=(n=d.next()).done);t=!0){var c=n.value;e.tableData.push({index:e.index,id:c.id,userName:c.userName,source:c.source,sourceCn:1===c.source?"web":2===c.source?"普通接口":3===c.source?"cmpp":31===c.source?"sgip":"smgp",unitprice:Number(c.unitprice)/1e4,accountTpye:c.accountTpye,accountTpyeCn:1===c.accountTpye?"行业短信":"营销短信",saleName:c.saleName,businessLicense:c.businessLicense,contract:c.contract,isPCN:c.isPCN,ischeck:c.ischeck,ischeckCn:0===c.ischeck?"未审核":1===c.ischeck?"已审核":1===c.ischeck?"审核拒绝":"已提交",mail:c.mail,mobile:c.mobile,nickName:c.nickName,phone:c.phone,qq:c.qq,remarks:c.remarks,companyName:c.companyName,agentID:1e5,agentName:"SYS"}),e.index++}}catch(e){s=!0,l=e}finally{try{!t&&d.return&&d.return()}finally{if(s)throw l}}})},cancel:function(){},audit:function(e){var a=this;this.addClientDataFlag=!0,this.postRequest("admin/findSaleCustomerInfo",{id:e.id}).then(function(e){console.log(e),a.addClientData={accountID:e.data.data.saleCustomerInfo.accountID,accountTpye:1===e.data.data.saleCustomerInfo?"行业短信":"营销短信",address:e.data.data.saleCustomerInfo.address,businessLicense:e.data.data.saleCustomerInfo.businessLicense,contract:e.data.data.saleCustomerInfo.contract,id:e.data.data.saleCustomerInfo.id,isPCN:0===e.data.data.saleCustomerInfo.isPCN?"非":"是",ischeckCn:0===e.data.data.saleCustomerInfo.ischeck?"未审核":1===e.data.data.saleCustomerInfo.ischeck?"审核通过":"审核拒绝",mail:e.data.data.saleCustomerInfo.mail,mobile:e.data.data.saleCustomerInfo.mobile,nickName:e.data.data.saleCustomerInfo.nickName,phone:e.data.data.saleCustomerInfo.phone,qq:e.data.data.saleCustomerInfo.qq,remarks:e.data.data.saleCustomerInfo.remarks,saleName:e.data.data.saleCustomerInfo.saleName,source:1===e.data.data.saleCustomerInfo.source?"web":2===e.data.data.saleCustomerInfo.source?"普通接口":3===e.data.data.saleCustomerInfo.source?"cmpp":31===e.data.data.saleCustomerInfo.source?"sgip":"smgp",unitprice:Number(e.data.data.saleCustomerInfo.unitprice)/1e4,userName:e.data.data.saleCustomerInfo.userName,companyName:e.data.data.saleCustomerInfo.companyName}})},auditPass:function(){this.addClientDataFlag=!1;var e=this;this.postRequest("admin/checkCustomerInfo",{ischeck:1,id:this.addClientData.id,remarks:this.addClientData.remarks}).then(function(a){a.data.success?(e.succeed(a.data.data),e.checkData(),e.isShowSubmitButton=!0):e.failed(a.data.resultMsg)})},auditReject:function(){this.addClientDataFlag=!1;var e=this;this.postRequest("admin/checkCustomerInfo",{ischeck:2,id:this.addClientData.id,remarks:this.addClientData.remarks}).then(function(a){a.data.success?(e.succeed(a.data.data),e.checkData()):e.failed(a.data.resultMsg)})},close:function(){this.addClientDataFlag=!1}},mounted:function(){this.getSaleList()}},n={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("el-form",{attrs:{"label-width":"120px",inline:"inline"},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.checkData(a):null}}},[t("el-form-item",{attrs:{label:"客户用户名："}},[t("el-input",{model:{value:e.userName,callback:function(a){e.userName=a},expression:"userName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"指定销售："}},[t("el-input",{model:{value:e.saleName,callback:function(a){e.saleName=a},expression:"saleName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"状态："}},[t("el-select",{model:{value:e.isCheck,callback:function(a){e.isCheck=a},expression:"isCheck"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.checkData}},[e._v("查询")])],1)],1),e._v(" "),e.checkIn?t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.ischeck?t("el-button",{attrs:{type:"text"},on:{click:function(t){e.audit(a.row)}}},[e._v("审核")]):e._e(),e._v(" "),1===a.row.ischeck?t("el-button",{attrs:{type:"text"},on:{click:function(t){e.show(a.row)}}},[e._v("提交")]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"companyName",label:"公司名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"userName",label:"客户名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sourceCn",label:"客户来源"}}),e._v(" "),t("el-table-column",{attrs:{prop:"unitprice",label:"单价（元）"}}),e._v(" "),t("el-table-column",{attrs:{prop:"accountTpyeCn",label:"账号类型"}}),e._v(" "),t("el-table-column",{attrs:{prop:"saleName",label:"指定销售"}}),e._v(" "),t("el-table-column",{attrs:{prop:"ischeckCn",label:"审核状态"}}),e._v(" "),t("el-table-column",{attrs:{width:"200px",label:"营业执照"},scopedSlots:e._u([{key:"default",fn:function(e){return e.row.businessLicense?[t("img",{staticStyle:{width:"150px",height:"120px"},attrs:{src:e.row.businessLicense}})]:void 0}}])}),e._v(" "),t("el-table-column",{attrs:{width:"200px",label:"合同"},scopedSlots:e._u([{key:"default",fn:function(e){return e.row.contract?[t("img",{staticStyle:{width:"150px",height:"120px"},attrs:{src:e.row.contract}})]:void 0}}])})],1),e._v(" "),t("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.pageNum,"page-size":[30,50],"page-size":e.pageSize,total:e.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(a){e.pageNum=a},"update:pageSize":function(a){e.pageSize=a}}}),e._v(" "),t("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.sum)+"条，")])],1):e._e(),e._v(" "),t("el-dialog",{ref:"addClientForm",attrs:{title:"审核客户申请",visible:e.addClientDataFlag,width:"500px"},on:{"update:visible":function(a){e.addClientDataFlag=a}}},[t("el-form",{ref:"addClientForm",staticStyle:{width:"450px"},attrs:{inline:"inline",model:e.addClientData,rules:e.rule1,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"公司名称："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addClientData.companyName,callback:function(a){e.$set(e.addClientData,"companyName",a)},expression:"addClientData.companyName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否是主账号："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addClientData.isPCN,callback:function(a){e.$set(e.addClientData,"isPCN",a)},expression:"addClientData.isPCN"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"审核结果："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addClientData.ischeckCn,callback:function(a){e.$set(e.addClientData,"ischeckCn",a)},expression:"addClientData.ischeckCn"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"客户来源："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addClientData.source,callback:function(a){e.$set(e.addClientData,"source",a)},expression:"addClientData.source"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"账号类型："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addClientData.accountTpye,callback:function(a){e.$set(e.addClientData,"accountTpye",a)},expression:"addClientData.accountTpye"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"指定销售："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addClientData.saleName,callback:function(a){e.$set(e.addClientData,"saleName",a)},expression:"addClientData.saleName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"单价(元)："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addClientData.unitprice,callback:function(a){e.$set(e.addClientData,"unitprice",e._n(a))},expression:"addClientData.unitprice"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系人："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addClientData.nickName,callback:function(a){e.$set(e.addClientData,"nickName",a)},expression:"addClientData.nickName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系电话："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addClientData.mobile,callback:function(a){e.$set(e.addClientData,"mobile",a)},expression:"addClientData.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"营业执照："}},[t("img",{directives:[{name:"show",rawName:"v-show",value:e.addClientData.businessLicense,expression:"addClientData.businessLicense"}],staticStyle:{width:"400px",height:"400px"},attrs:{src:e.addClientData.businessLicense}})]),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"合同："}},[t("img",{directives:[{name:"show",rawName:"v-show",value:e.addClientData.contract,expression:"addClientData.contract"}],staticStyle:{width:"400px",height:"400px"},attrs:{src:e.addClientData.contract}})]),e._v(" "),t("el-form-item",{attrs:{label:"备注："}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.addClientData.remarks,callback:function(a){e.$set(e.addClientData,"remarks",a)},expression:"addClientData.remarks"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v("关 闭")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.auditPass}},[e._v("审核通过")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.auditReject}},[e._v("审核拒绝")])],1)],1),e._v(" "),t("el-dialog",{ref:"addClientForm",attrs:{title:"确认客户申请",visible:e.saveAddClientDataFlag,width:"500px"},on:{"update:visible":function(a){e.saveAddClientDataFlag=a}}},[t("el-form",{ref:"addClientForm",staticStyle:{width:"450px"},attrs:{inline:"inline",model:e.saveAddClientData,rules:e.rule1,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"客户用户名："}},[t("el-input",{model:{value:e.saveAddClientData.userName,callback:function(a){e.$set(e.saveAddClientData,"userName",a)},expression:"saveAddClientData.userName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"公司名称："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.saveAddClientData.companyName,callback:function(a){e.$set(e.saveAddClientData,"companyName",a)},expression:"saveAddClientData.companyName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否是主账号："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.saveAddClientData.isPCN,callback:function(a){e.$set(e.saveAddClientData,"isPCN",a)},expression:"saveAddClientData.isPCN"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"审核结果："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.saveAddClientData.ischeckCn,callback:function(a){e.$set(e.saveAddClientData,"ischeckCn",a)},expression:"saveAddClientData.ischeckCn"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"客户来源："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.saveAddClientData.source,callback:function(a){e.$set(e.saveAddClientData,"source",a)},expression:"saveAddClientData.source"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"账号类型："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.saveAddClientData.accountTpye,callback:function(a){e.$set(e.saveAddClientData,"accountTpye",a)},expression:"saveAddClientData.accountTpye"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"指定销售："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.saveAddClientData.saleName,callback:function(a){e.$set(e.saveAddClientData,"saleName",a)},expression:"saveAddClientData.saleName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"单价(元)："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.saveAddClientData.unitprice,callback:function(a){e.$set(e.saveAddClientData,"unitprice",e._n(a))},expression:"saveAddClientData.unitprice"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系人："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.saveAddClientData.nickName,callback:function(a){e.$set(e.saveAddClientData,"nickName",a)},expression:"saveAddClientData.nickName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系电话："}},[t("el-input",{attrs:{disabled:!0},model:{value:e.saveAddClientData.mobile,callback:function(a){e.$set(e.saveAddClientData,"mobile",a)},expression:"saveAddClientData.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"营业执照："}},[t("img",{directives:[{name:"show",rawName:"v-show",value:e.saveAddClientData.businessLicense,expression:"saveAddClientData.businessLicense"}],staticStyle:{width:"400px",height:"400px"},attrs:{src:e.saveAddClientData.businessLicense}})]),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"合同："}},[t("img",{directives:[{name:"show",rawName:"v-show",value:e.saveAddClientData.contract,expression:"saveAddClientData.contract"}],staticStyle:{width:"400px",height:"400px"},attrs:{src:e.saveAddClientData.contract}})]),e._v(" "),t("el-form-item",{attrs:{label:"备注："}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.saveAddClientData.remarks,callback:function(a){e.$set(e.saveAddClientData,"remarks",a)},expression:"saveAddClientData.remarks"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v("关 闭")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.submitAddClientData(e.saveAddClientData)}}},[e._v("确认提交")])],1)],1)],1)},staticRenderFns:[]};var d=t("VU/8")(l,n,!1,function(e){t("gA8J")},"data-v-736256b4",null);a.default=d.exports}});