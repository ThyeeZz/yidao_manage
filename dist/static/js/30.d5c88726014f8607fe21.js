webpackJsonp([30],{U7WJ:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("BO1k"),i=e.n(l),n={name:"A",data:function(){return{sum:0,pageSize:30,pageNum:1,checkIn:!1,loading:!1,tableData:[],totalPage:1e3,userName:"",cuList:[],ctList:[],cmList:[],modifyData:{visible:!1,id:"",cmgateway:"",cugateway:"",ctgateway:"",memo:""},ids:"",bulkChangeData:{visible:!1,cm:"",cu:"",ct:""},operList:[{label:"中国移动",value:1},{label:"中国联通",value:2},{label:"中国电信",value:3}],beforeList:[],afterList:[],bulkChange2Data:{visible:!1,oper:"",beforeBatGW:"",beforeBatGWName:"",afterBatGW:"",afterBatGWName:"",memo:""}}},methods:{handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},index:function(t){return t+1},checkData:function(){this.tableData=[],this.checkIn=!0,this.loading=!0;var t=this;this.postRequest("admin/listClientGwScene",{userName:this.userName}).then(function(a){t.loading=!1,t.sum=a.data.data.page.totalCount;var e=!0,l=!1,n=void 0;try{for(var r,s=i()(a.data.data.data);!(e=(r=s.next()).done);e=!0){var o=r.value;t.tableData.push({id:o.id,userName:o.userName,cmgatewayname:o.cmgatewayname,cugatewayname:o.cugatewayname,ctgatewayname:o.ctgatewayname,creater:o.creater,createtime:o.createtime,modifier:o.modifier,modifytime:o.modifytime})}}catch(t){l=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(l)throw n}}})},modify:function(t){this.ctList=[],this.cmList=[],this.cuList=[];var a=this;this.postRequest("admin/editClientGwScene",{id:t.id}).then(function(t){var e=!0,l=!1,n=void 0;try{for(var r,s=i()(t.data.data.cuList);!(e=(r=s.next()).done);e=!0){var o=r.value;a.cuList.push({label:o.gatewayname,value:o.gateway})}}catch(t){l=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(l)throw n}}var u=!0,c=!1,f=void 0;try{for(var m,b=i()(t.data.data.ctList);!(u=(m=b.next()).done);u=!0){var d=m.value;a.ctList.push({label:d.gatewayname,value:d.gateway})}}catch(t){c=!0,f=t}finally{try{!u&&b.return&&b.return()}finally{if(c)throw f}}var v=!0,h=!1,y=void 0;try{for(var g,p=i()(t.data.data.cmList);!(v=(g=p.next()).done);v=!0){var k=g.value;a.cmList.push({label:k.gatewayname,value:k.gateway})}}catch(t){h=!0,y=t}finally{try{!v&&p.return&&p.return()}finally{if(h)throw y}}a.modifyData={visible:!0,userName:t.data.data.clientGwScene.userName,id:t.data.data.clientGwScene.id,cmgateway:t.data.data.clientGwScene.cmgateway,cugateway:t.data.data.clientGwScene.cugateway,ctgateway:t.data.data.clientGwScene.ctgateway,memo:t.data.data.clientGwScene.memo}})},submitModify:function(){var t=this;this.postRequest("admin/saveEditClientGwScene",this.modifyData).then(function(a){t.modifyData.visible=!1,t.resAlert(a.data),t.checkData()})},del:function(t){var a=this,e=this;this.$confirm("确认删除【"+t.userName+"】?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.postRequest("admin/deleteClientGwScene",{id:t.id}).then(function(t){e.resAlert(t.data),e.checkData()})}).catch(function(){})},handleSelectionChange:function(t){this.ids="";var a=!0,e=!1,l=void 0;try{for(var n,r=i()(t);!(a=(n=r.next()).done);a=!0){var s=n.value;this.ids+=s.id+","}}catch(t){e=!0,l=t}finally{try{!a&&r.return&&r.return()}finally{if(e)throw l}}this.ids=this.ids.substr(0,this.ids.length-1)},bulkChange:function(){var t=this;""!==this.ids?this.postRequest("admin/selectBatGateWayScence",{t:""}).then(function(a){t.cmList=[],t.cuList=[],t.ctList=[];var e=!0,l=!1,n=void 0;try{for(var r,s=i()(a.data.data.cmList);!(e=(r=s.next()).done);e=!0){var o=r.value;1===o.status&&t.cmList.push({value:o.gateway,label:o.gatewayname})}}catch(t){l=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(l)throw n}}var u=!0,c=!1,f=void 0;try{for(var m,b=i()(a.data.data.cuList);!(u=(m=b.next()).done);u=!0){var d=m.value;1===d.status&&t.cuList.push({value:d.gateway,label:d.gatewayname})}}catch(t){c=!0,f=t}finally{try{!u&&b.return&&b.return()}finally{if(c)throw f}}var v=!0,h=!1,y=void 0;try{for(var g,p=i()(a.data.data.ctList);!(v=(g=p.next()).done);v=!0){var k=g.value;1===k.status&&t.ctList.push({value:k.gateway,label:k.gatewayname})}}catch(t){h=!0,y=t}finally{try{!v&&p.return&&p.return()}finally{if(h)throw y}}t.bulkChangeData.visible=!0}):this.$message.warning("请选择需要修改的记录")},bulkChange2:function(){this.bulkChange2Data.visible=!0},getOper:function(){var t=this;t.beforeList=[],t.afterList=[],this.postRequest("admin/getGatewayBySp",{oper:this.bulkChange2Data.oper}).then(function(a){var e=!0,l=!1,n=void 0;try{for(var r,s=i()(a.data.before);!(e=(r=s.next()).done);e=!0){var o=r.value;t.beforeList.push({value:o.gateway,label:o.gatewayName})}}catch(t){l=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(l)throw n}}var u=!0,c=!1,f=void 0;try{for(var m,b=i()(a.data.after);!(u=(m=b.next()).done);u=!0){var d=m.value;t.afterList.push({value:d.gateway,label:d.gatewayName})}}catch(t){c=!0,f=t}finally{try{!u&&b.return&&b.return()}finally{if(c)throw f}}})},submitBulkChange2:function(){var t=this,a=this;this.beforeList.forEach(function(a){a.value===t.bulkChange2Data.beforeBatGW&&(t.bulkChange2Data.beforeBatGWName=a.label)}),this.afterList.forEach(function(a){a.value===t.bulkChange2Data.afterBatGW&&(t.bulkChange2Data.afterBatGWName=a.label)}),this.postRequest("admin/saveBatModifyGwScene",this.bulkChange2Data).then(function(t){a.checkData(),a.bulkChange2Data.visible=!1,a.resAlert(t.data)})},submitBulkChange:function(){var t=this;this.postRequest("admin/saveSelBatGatewayScence",{ids:this.ids,cm:this.bulkChangeData.cm?this.bulkChangeData.cm:0,cu:this.bulkChangeData.cu?this.bulkChangeData.cu:0,ct:this.bulkChangeData.ct?this.bulkChangeData.ct:0}).then(function(a){!0===a.data.success?(t.checkData(),t.bulkChangeData.visible=!1,t.$message.success(a.data.data)):(t.bulkChangeData.visible=!1,t.$message.error("修改失败"))})}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("el-form",{attrs:{inline:"inline","label-width":"120px"},nativeOn:{keyup:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.checkData(a):null}}},[e("el-form-item",{attrs:{label:"客户账号："}},[e("el-input",{model:{value:t.userName,callback:function(a){t.userName=a},expression:"userName"}})],1),t._v(" "),e("el-form-item",[e("el-button",{staticClass:"fr",attrs:{type:"primary",plain:""},on:{click:t.checkData}},[t._v("查询")])],1)],1),t._v(" "),t.checkIn?e("el-card",[e("el-button",{attrs:{type:"text"},on:{click:t.bulkChange}},[t._v("+选择性批量修改网关")]),t._v(" "),e("el-button",{attrs:{type:"text"},on:{click:t.bulkChange2}},[t._v("+批量修改网关")]),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{border:"",handle:"",data:t.tableData,stripe:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{label:"序号",width:"50px",type:"index",index:t.index}}),t._v(" "),e("el-table-column",{attrs:{width:"150px",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){t.modify(a.row)}}},[t._v("修改")]),t._v(" "),e("el-button",{attrs:{type:"text"},on:{click:function(e){t.del(a.row)}}},[t._v("删除")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"userName",label:"客户账号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"cmgatewayname",label:"移动网关"}}),t._v(" "),e("el-table-column",{attrs:{prop:"cugatewayname",label:"联通网关"}}),t._v(" "),e("el-table-column",{attrs:{prop:"ctgatewayname",label:"电信网关"}}),t._v(" "),e("el-table-column",{attrs:{prop:"creater",label:"创建人"}}),t._v(" "),e("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"modifier",label:"修改人"}}),t._v(" "),e("el-table-column",{attrs:{prop:"modifytime",label:"修改时间"}})],1),t._v(" "),e("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":t.pageNum,"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper",total:t.sum},on:{"size-change":t.handleSizeChange,"current-change":t.handlePageChange,"update:currentPage":function(a){t.pageNum=a},"update:pageSize":function(a){t.pageSize=a}}}),t._v(" "),e("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[t._v("共"+t._s(t.sum)+"条，")])],1):t._e(),t._v(" "),e("el-dialog",{attrs:{title:"审核路由修改",visible:t.modifyData.visible,width:"500px"},on:{"update:visible":function(a){t.$set(t.modifyData,"visible",a)}}},[e("el-form",{staticStyle:{width:"400px"},attrs:{"label-width":"150px"}},[e("el-form-item",{attrs:{label:"客户账号："}},[e("el-input",{attrs:{disabled:""},model:{value:t.modifyData.userName,callback:function(a){t.$set(t.modifyData,"userName",a)},expression:"modifyData.userName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"移动网关："}},[e("el-select",{attrs:{filterable:""},model:{value:t.modifyData.cmgateway,callback:function(a){t.$set(t.modifyData,"cmgateway",a)},expression:"modifyData.cmgateway"}},t._l(t.cmList,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",{attrs:{label:"联通网关："}},[e("el-select",{attrs:{filterable:""},model:{value:t.modifyData.cugateway,callback:function(a){t.$set(t.modifyData,"cugateway",a)},expression:"modifyData.cugateway"}},t._l(t.cuList,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",{attrs:{label:"电信网关："}},[e("el-select",{attrs:{filterable:""},model:{value:t.modifyData.ctgateway,callback:function(a){t.$set(t.modifyData,"ctgateway",a)},expression:"modifyData.ctgateway"}},t._l(t.ctList,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",{attrs:{label:"备注："}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.modifyData.memo,callback:function(a){t.$set(t.modifyData,"memo",a)},expression:"modifyData.memo"}})],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.modifyData.visible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.submitModify}},[t._v("确认修改")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"选择性批量修改网关",visible:t.bulkChangeData.visible,width:"500px"},on:{"update:visible":function(a){t.$set(t.bulkChangeData,"visible",a)}}},[e("el-form",{staticStyle:{width:"400px"},attrs:{"label-width":"150px"}},[e("el-form-item",{attrs:{label:"移动网关："}},[e("el-select",{attrs:{filterable:""},model:{value:t.bulkChangeData.cm,callback:function(a){t.$set(t.bulkChangeData,"cm",a)},expression:"bulkChangeData.cm"}},t._l(t.cmList,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",{attrs:{label:"联通网关："}},[e("el-select",{attrs:{filterable:""},model:{value:t.bulkChangeData.cu,callback:function(a){t.$set(t.bulkChangeData,"cu",a)},expression:"bulkChangeData.cu"}},t._l(t.cuList,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",{attrs:{label:"电信网关："}},[e("el-select",{attrs:{filterable:""},model:{value:t.bulkChangeData.ct,callback:function(a){t.$set(t.bulkChangeData,"ct",a)},expression:"bulkChangeData.ct"}},t._l(t.ctList,function(t){return e("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.bulkChangeData.visible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.submitBulkChange}},[t._v("确认修改")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"批量修改网关",visible:t.bulkChange2Data.visible,width:"500px"},on:{"update:visible":function(a){t.$set(t.bulkChange2Data,"visible",a)}}},[e("el-form",{staticStyle:{width:"400px"},attrs:{"label-width":"150px"}},[e("el-form-item",{attrs:{label:"运营商："}},[e("el-select",{attrs:{filterable:""},on:{change:t.getOper},model:{value:t.bulkChange2Data.oper,callback:function(a){t.$set(t.bulkChange2Data,"oper",a)},expression:"bulkChange2Data.oper"}},t._l(t.operList,function(t){return e("el-option",{attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",{attrs:{label:"修改前网关："}},[e("el-select",{attrs:{filterable:""},model:{value:t.bulkChange2Data.beforeBatGW,callback:function(a){t.$set(t.bulkChange2Data,"beforeBatGW",a)},expression:"bulkChange2Data.beforeBatGW"}},t._l(t.beforeList,function(t){return e("el-option",{attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",{attrs:{label:"修改后网关："}},[e("el-select",{attrs:{filterable:""},model:{value:t.bulkChange2Data.afterBatGW,callback:function(a){t.$set(t.bulkChange2Data,"afterBatGW",a)},expression:"bulkChange2Data.afterBatGW"}},t._l(t.afterList,function(t){return e("el-option",{attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",{attrs:{label:"备注："}},[e("el-input",{model:{value:t.bulkChange2Data.memo,callback:function(a){t.$set(t.bulkChange2Data,"memo",a)},expression:"bulkChange2Data.memo"}})],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.bulkChange2Data.visible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.submitBulkChange2}},[t._v("确认修改")])],1)],1)],1)},staticRenderFns:[]};var s=e("VU/8")(n,r,!1,function(t){e("lJfF")},"data-v-9aa2dab6",null);a.default=s.exports},lJfF:function(t,a){}});