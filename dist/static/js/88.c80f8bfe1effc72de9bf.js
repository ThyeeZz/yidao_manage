webpackJsonp([88],{JFqS:function(e,a){},"nt+Z":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("BO1k"),o=t.n(i),l={data:function(){return{modifyNumSegFlag:!1,dialogFormVisible:!1,addGatewayForm:{mobile:"",operaid:""},modifyNumSegForm:{},rules:{mobile:[{required:!0,message:"不能为空",trigger:"blur"}],operaid:[{required:!0,message:"不能为空",trigger:"blur"}]},options:[{label:"全部",id:0,value:null},{label:"移动",id:1,value:1},{label:"联通",id:2,value:2},{label:"电信",id:3,value:3}],dialogOptions:[{label:"移动",id:1,value:1},{label:"联通",id:2,value:2},{label:"电信",id:3,value:3}],mobile:"",operaid:"",id:"",formLabelWidth:"120px",pageNum:1,pageSize:30,sum:0,index:0,tableData:[],checkIn:!1,loading:!1}},methods:{modifyData:function(e){this.modifyNumSegForm={},this.modifyNumSegFlag=!0,this.modifyNumSegForm={id:e.id,mobile:e.mobile,operaid:e.operaid,operaidCn:e.operaidCn}},saveAddNumSeg:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.dialogFormVisible=!1;var t=a;a.postRequest("admin/saveAddNumSeg",{mobile:a.addGatewayForm.mobile,operaid:a.addGatewayForm.operaid}).then(function(e){e.data.success?(t.succeed(e.data.data),t.checkData()):t.failed(e.data.resultMsg)})})},resetForm:function(e){this.dialogFormVisible=!1,this.addGatewayForm={mobile:"",operaid:""},this.modifyNumSegFlag=!1},deleteDate:function(e){var a=this;console.log(e);var t=this;this.$confirm("此操作将删除号段："+e.mobile+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/deleteNumSeg",{id:e.id}).then(function(e){console.log(e),e.data.success?(a.succeed(e.data.data),a.checkData()):a.failed(e.data.message)})}).catch(function(){})},succeed:function(e){this.$message({message:e,type:"success"})},failed:function(e){this.$message.error(e)},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){this.tableData=[],this.checkIn=!0,this.loading=!0;var e=this;this.postRequest("admin/listNumSeg",{mobile:this.mobile,operaid:this.operaid,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(a){console.log(a),e.loading=!1,e.sum=a.data.data.page.totalCount;var t=!0,i=!1,l=void 0;try{for(var n,r=o()(a.data.data.numsegList);!(t=(n=r.next()).done);t=!0){var d=n.value;e.tableData.push({index:e.index,mobile:d.mobile,operaid:d.operaid,operaidCn:1===d.operaid?"移动":2===d.operaid?"联通":"电信",id:d.id}),e.index++}}catch(e){i=!0,l=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw l}}})},cancel:function(){}},mounted:function(){this.checkData()}},n={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("el-button",{attrs:{type:"text"},on:{click:function(a){e.dialogFormVisible=!0}}},[e._v("+添加号段")]),e._v(" "),t("el-form",{attrs:{"label-width":"120px",inline:"inline"},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.checkData(a):null}}},[t("el-form-item",{attrs:{label:"号段："}},[t("el-input",{model:{value:e.mobile,callback:function(a){e.mobile=a},expression:"mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"所属运营商："}},[t("el-select",{model:{value:e.operaid,callback:function(a){e.operaid=a},expression:"operaid"}},e._l(e.options,function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.checkData}},[e._v("查询")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"添加号段",visible:e.dialogFormVisible},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[t("el-form",{ref:"addGatewayForm",attrs:{model:e.addGatewayForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"号段：","label-width":e.formLabelWidth,prop:"mobile"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.addGatewayForm.mobile,callback:function(a){e.$set(e.addGatewayForm,"mobile",a)},expression:"addGatewayForm.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"运营商：",prop:"operaid"}},[t("el-select",{model:{value:e.addGatewayForm.operaid,callback:function(a){e.$set(e.addGatewayForm,"operaid",a)},expression:"addGatewayForm.operaid"}},e._l(e.dialogOptions,function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.saveAddNumSeg("addGatewayForm")}}},[e._v("添加")]),e._v(" "),t("el-button",{on:{click:function(a){e.resetForm("addGatewayForm")}}},[e._v("取消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"号段修改",visible:e.modifyNumSegFlag},on:{"update:visible":function(a){e.modifyNumSegFlag=a}}},[t("el-form",{ref:"modifyNumSegForm",attrs:{model:e.modifyNumSegForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"号段：","label-width":e.formLabelWidth,prop:"mobile"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.modifyNumSegForm.mobile,callback:function(a){e.$set(e.modifyNumSegForm,"mobile",a)},expression:"modifyNumSegForm.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"运营商：",prop:"operaid"}},[t("el-select",{model:{value:e.modifyNumSegForm.operaid,callback:function(a){e.$set(e.modifyNumSegForm,"operaid",a)},expression:"modifyNumSegForm.operaid"}},e._l(e.dialogOptions,function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.saveModifyGateway("modifyNumSegForm")}}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:function(a){e.resetForm("modifyNumSegForm")}}},[e._v("取消")])],1)],1),e._v(" "),e.checkIn?t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),t("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.modifyData(a.row)}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.deleteDate(a.row)}}},[e._v("删除")])]}}])}),e._v(" "),t("el-table-column",{attrs:{width:"150px",prop:"mobile",label:"号段"}}),e._v(" "),t("el-table-column",{attrs:{prop:"operaidCn",label:"运营商"}})],1),e._v(" "),t("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.pageNum,"page-size":[30,50],"page-size":e.pageSize,total:e.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(a){e.pageNum=a},"update:pageSize":function(a){e.pageSize=a}}}),e._v(" "),t("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.sum)+"条，")])],1):e._e()],1)},staticRenderFns:[]};var r=t("VU/8")(l,n,!1,function(e){t("JFqS")},"data-v-208c0d12",null);a.default=r.exports}});