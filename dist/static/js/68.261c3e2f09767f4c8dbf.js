webpackJsonp([68],{OFyz:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("BO1k"),i=l.n(a),n={name:"admin_dlslb",data:function(){return{sum:0,pageNum:1,PageSize:30,checkIn:!1,loading:!1,tableData:[],status:0,statusOpt:[{value:0,label:"所有"},{value:1,label:"正常"},{value:2,label:"禁用"}],source:0,sourceOpt:[{value:0,label:"所有"},{value:1,label:"web客户"},{value:2,label:"api用户"}],feetype:0,feetypeOpt:[{value:0,label:"所有"},{value:1,label:"按次"},{value:2,label:"按秒"},{value:3,label:"按分"},{value:4,label:"分段"}],rollOpt:[{value:"pcn_call_1",label:"pcn_call_1"},{value:"pcn_call_api",label:"pcn_call_api"}],sourceOpt2:[{value:1,label:"web客户"},{value:2,label:"api用户"}],feetypeOpt2:[{value:1,label:"按次"},{value:2,label:"按秒"},{value:3,label:"按分"},{value:4,label:"分段"}],statusOpt2:[{value:1,label:"正常"},{value:2,label:"禁用"}],userName:"",addClient:!1,modify:!1,del:!1,mod:{username:"",source:1,roleName:"pcn_call_1",feetype:1,status:1,userip:"",balance:"",unitprice:""},editClient:{id:"",username:"",source:0,roleName:0,feetype:0,status:0,userip:"",balance:"",unitprice:""},withholdClient:{visiable:!1,id:"",count:"",remark:"",opttype:3},supplementClient:{visiable:!1,id:"",balance:"",count:"",remark:"",opttype:"2"},rule1:{username:[{required:!0,message:"请输入客户用户名",trigger:"blur"}]},rule2:{username:[{required:!0,message:"请输入客户用户名",trigger:"blur"}]},rule3:{count:[{required:!0,message:"请输入扣款数量",trigger:"blur"}],remark:[{required:!0,message:"请输入扣款原因",trigger:"blur"}]},rule4:{count:[{required:!0,message:"请输入补款数量",trigger:"blur"}],remark:[{required:!0,message:"请输入补款原因",trigger:"blur"}]}}},methods:{handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){this.tableData=[],this.checkIn=!0,this.loading=!0;var e=this;this.postRequest("admin/listAllCustomerCall",{pageNum:this.pageNum,pageSize:this.pageSize,status:this.status,username:this.userName,source:this.source,feetype:this.feetype}).then(function(t){e.loading=!1,e.sum=t.data.data.page.totalCount;var l=!0,a=!1,n=void 0;try{for(var s,o=i()(t.data.data.data);!(l=(s=o.next()).done);l=!0){var r=s.value;e.tableData.push({id:r.id,userName:r.userName,userip:r.userip,source:r.source,feetype:r.feetype,status:r.status,roleName:r.roleName,create_time:r.create_time,update_time:r.update_time,balance:r.balance,unitprice:r.unitprice})}}catch(e){a=!0,n=e}finally{try{!l&&o.return&&o.return()}finally{if(a)throw n}}})},submitAdd:function(){var e=this,t=this;this.$refs.form1.validate(function(l){if(!l)return!1;e.postRequest("admin/saveAddCustomerCall",{username:e.mod.username,source:e.mod.source,roleName:e.mod.roleName,feetype:e.mod.feetype,status:e.mod.status,userip:e.mod.userip,balance:e.mod.balance,unitprice:e.mod.unitprice}).then(function(e){t.addClient=!1,t.checkData(),t.resAlert(e.data),t.mod={username:"",source:0,roleName:0,feetype:0,status:0,userip:"",balance:"",unitprice:""}})})},edit:function(e){var t=this;this.modify=!0,this.postRequest("admin/getUpdateCustomerCall",{id:e.id}).then(function(e){t.editClient={id:e.data.data.cusomerCall.id,username:e.data.data.cusomerCall.userName,source:e.data.data.cusomerCall.source,roleName:e.data.data.cusomerCall.roleName,feetype:e.data.data.cusomerCall.feetype,status:e.data.data.cusomerCall.status,userip:e.data.data.cusomerCall.userip,balance:e.data.data.customerCallBalance.balance,unitprice:e.data.data.customerCallBalance.unitprice,rollOpt:[]}})},submitEdit:function(){var e=this,t=this;this.$refs.modify.validate(function(l){if(!l)return!1;e.postRequest("admin/saveUpdateCustomerCall",{id:e.editClient.id,source:e.editClient.source,roleName:e.editClient.roleName,feetype:e.editClient.feetype,status:e.editClient.status,userip:e.editClient.userip,balance:e.editClient.balance,unitprice:e.editClient.unitprice}).then(function(e){t.resAlert(e.data),t.modify=!1,t.checkData()})})},delClient:function(e){var t=this;this.$confirm("确认删除【"+e.userName+"】?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/deleteCustomerCall",{id:e.id}).then(function(l){1==l.data.success?(t.$message.success(l.data.message),t.tableData.forEach(function(l,a){l.id==e.id&&t.tableData.splice(a,1)})):t.$message.error(l.data.message)})}).catch(function(){})},withhold:function(e){console.log(e),this.withholdClient.visiable=!0;var t=this;this.postRequest("admin/getCallDeduct",{id:e.id}).then(function(l){t.withholdClient={id:e.id,userName:l.data.data.customerCallBalance.userName,balance:l.data.data.customerCallBalance.balance,visiable:!0,count:"",remark:"",opttype:3}})},submitWithhold:function(){var e=this,t=this;this.$refs.withhold.validate(function(l){if(!l)return!1;e.withholdClient.visiable=!1,e.postRequest("admin/saveCallDeduct",{id:t.withholdClient.id,count:t.withholdClient.count,remark:t.withholdClient.remark,opttype:3}).then(function(e){t.resAlert(e.data),t.checkData()})})},supplement:function(e){this.supplementClient.visiable=!0;var t=this;this.postRequest("admin/getCallRefund",{id:e.id}).then(function(e){t.supplementClient={visiable:!0,id:e.data.data.customerCallBalance.customerID,userName:e.data.data.customerCallBalance.userName,balance:e.data.data.customerCallBalance.balance,count:"",remark:"",opttype:2}})},submitSupplement:function(){var e=this,t=this;this.$refs.supplement.validate(function(l){if(!l)return!1;e.supplementClient.visiable=!1,e.postRequest("admin/saveCallRefund",{id:e.supplementClient.id,count:e.supplementClient.count,remark:e.supplementClient.remark,opttype:2}).then(function(e){t.resAlert(e.data),t.checkData()})})},index:function(e){return e+1},handleClose:function(e){e()}},mounted:function(){this.checkData()}},s={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"container"},[l("el-form",{attrs:{inline:"inline","label-width":"120px"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.checkData(t):null}}},[l("el-form-item",{attrs:{label:"客户用户名："}},[l("el-input",{model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"状态："}},[l("el-select",{model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusOpt,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"客户类型："}},[l("el-select",{model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.sourceOpt,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"计费类型："}},[l("el-select",{model:{value:e.feetype,callback:function(t){e.feetype=t},expression:"feetype"}},e._l(e.feetypeOpt,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary",plain:""},on:{click:e.checkData}},[e._v("查询")])],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.addClient=!0}}},[e._v("添加客户")]),e._v(" "),l("el-dialog",{attrs:{title:"添加客户",visible:e.addClient,width:"500px","before-close":e.handleClose},on:{"update:visible":function(t){e.addClient=t}}},[l("el-form",{ref:"form1",staticStyle:{width:"400px"},attrs:{model:e.mod,rules:e.rule1,"label-width":"150px",inline:"inline"}},[l("el-form-item",{attrs:{label:"客户用户名：",prop:"username"}},[l("el-input",{model:{value:e.mod.username,callback:function(t){e.$set(e.mod,"username",t)},expression:"mod.username"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"客户类型：",prop:"source"}},[l("el-select",{model:{value:e.mod.source,callback:function(t){e.$set(e.mod,"source",t)},expression:"mod.source"}},e._l(e.sourceOpt,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"角色：",prop:"roleName"}},[l("el-select",{model:{value:e.mod.roleName,callback:function(t){e.$set(e.mod,"roleName",t)},expression:"mod.roleName"}},e._l(e.rollOpt,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"计费类型：",prop:"feetype"}},[l("el-select",{model:{value:e.mod.feetype,callback:function(t){e.$set(e.mod,"feetype",t)},expression:"mod.feetype"}},e._l(e.feetypeOpt,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"状态：",prop:"status"}},[l("el-select",{model:{value:e.mod.status,callback:function(t){e.$set(e.mod,"status",t)},expression:"mod.status"}},e._l(e.statusOpt,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"IP绑定：",prop:"userip"}},[l("el-input",{model:{value:e.mod.userip,callback:function(t){e.$set(e.mod,"userip",t)},expression:"mod.userip"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"余额（通）：",prop:"balance"}},[l("el-input",{model:{value:e.mod.balance,callback:function(t){e.$set(e.mod,"balance",t)},expression:"mod.balance"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"单价（元/通）：",prop:"unitprice"}},[l("el-input",{model:{value:e.mod.unitprice,callback:function(t){e.$set(e.mod,"unitprice",t)},expression:"mod.unitprice"}})],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.addClient=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.submitAdd}},[e._v("确认添加")])],1)],1)],1)],1),e._v(" "),e.checkIn?l("el-card",[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:e.tableData,stripe:""}},[l("el-table-column",{attrs:{label:"序号",width:"50px",type:"index",index:e.index}}),e._v(" "),l("el-table-column",{attrs:{width:"200px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){e.edit(t.row)}}},[e._v("修改信息")]),e._v(" "),l("el-button",{attrs:{type:"text"},on:{click:function(l){e.delClient(t.row)}}},[e._v("删除")]),e._v(" "),l("el-button",{attrs:{type:"text"},on:{click:function(l){e.withhold(t.row)}}},[e._v("扣款")]),e._v(" "),l("el-button",{attrs:{type:"text"},on:{click:function(l){e.supplement(t.row)}}},[e._v("补款")])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"userName",label:"客户用户名"}}),e._v(" "),l("el-table-column",{attrs:{prop:"balance",label:"余额（通）"}}),e._v(" "),l("el-table-column",{attrs:{prop:"unitprice",label:"单价（元/通）"}}),e._v(" "),l("el-table-column",{attrs:{label:"客户类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.source?"web客户":"api客户"))]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"roleName",label:"角色"}}),e._v(" "),l("el-table-column",{attrs:{label:"计费类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1===t.row.feetype?"按次":2===t.row.feetype?"按秒":3===t.row.feetype?"按分":"分段"))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"客户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1===t.row.status?"正常":"禁用"))]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"userip",label:"绑定IP"}}),e._v(" "),l("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),e._v(" "),l("el-table-column",{attrs:{prop:"update_time",label:"修改时间"}})],1),e._v(" "),l("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.pageNum,"page-size":e.PageSize,layout:"sizes, prev, pager, next, jumper",total:e.sum},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(t){e.pageNum=t},"update:pageSize":function(t){e.PageSize=t}}}),e._v(" "),l("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.sum)+"条，")]),e._v(" "),l("el-dialog",{attrs:{title:"修改信息",visible:e.modify,width:"500px","before-close":e.handleClose},on:{"update:visible":function(t){e.modify=t}}},[l("el-form",{ref:"modify",staticStyle:{width:"400px"},attrs:{model:e.editClient,rules:e.rule2,"label-width":"150px",inline:"inline"}},[l("el-form-item",{attrs:{label:"客户用户名：",prop:"username"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.editClient.username,callback:function(t){e.$set(e.editClient,"username",t)},expression:"editClient.username"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"客户类型："}},[l("el-select",{model:{value:e.editClient.source,callback:function(t){e.$set(e.editClient,"source",t)},expression:"editClient.source"}},e._l(e.sourceOpt2,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"角色："}},[l("el-select",{model:{value:e.editClient.roleName,callback:function(t){e.$set(e.editClient,"roleName",t)},expression:"editClient.roleName"}},e._l(e.rollOpt,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"计费类型："}},[l("el-select",{model:{value:e.editClient.feetype,callback:function(t){e.$set(e.editClient,"feetype",t)},expression:"editClient.feetype"}},e._l(e.feetypeOpt2,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"状态："}},[l("el-select",{model:{value:e.editClient.status,callback:function(t){e.$set(e.editClient,"status",t)},expression:"editClient.status"}},e._l(e.statusOpt2,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"IP绑定："}},[l("el-input",{model:{value:e.editClient.userip,callback:function(t){e.$set(e.editClient,"userip",t)},expression:"editClient.userip"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"余额（通）："}},[l("el-input",{model:{value:e.editClient.balance,callback:function(t){e.$set(e.editClient,"balance",t)},expression:"editClient.balance"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"单价（元/通）："}},[l("el-input",{model:{value:e.editClient.unitprice,callback:function(t){e.$set(e.editClient,"unitprice",t)},expression:"editClient.unitprice"}})],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.modify=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.submitEdit}},[e._v("确认修改")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"语音客户扣款",visible:e.withholdClient.visiable,width:"500px","before-close":e.handleClose},on:{"update:visible":function(t){e.$set(e.withholdClient,"visiable",t)}}},[l("el-form",{ref:"withhold",staticStyle:{width:"400px"},attrs:{model:e.withholdClient,rules:e.rule3,"label-width":"120px",inline:"inline"}},[l("el-form-item",{attrs:{label:"扣款账号："}},[l("el-input",{attrs:{disabled:"disabled"},model:{value:e.withholdClient.userName,callback:function(t){e.$set(e.withholdClient,"userName",t)},expression:"withholdClient.userName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"当前余额："}},[l("el-input",{attrs:{disabled:"disabled"},model:{value:e.withholdClient.balance,callback:function(t){e.$set(e.withholdClient,"balance",t)},expression:"withholdClient.balance"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"扣款条数：",prop:"count"}},[l("el-input",{model:{value:e.withholdClient.count,callback:function(t){e.$set(e.withholdClient,"count",t)},expression:"withholdClient.count"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"扣款原因：",prop:"remark"}},[l("el-input",{model:{value:e.withholdClient.remark,callback:function(t){e.$set(e.withholdClient,"remark",t)},expression:"withholdClient.remark"}})],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.withholdClient.visiable=!1}}},[e._v("取消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.submitWithhold}},[e._v("保存")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"语音客户补款",visible:e.supplementClient.visiable,width:"500px","before-close":e.handleClose},on:{"update:visible":function(t){e.$set(e.supplementClient,"visiable",t)}}},[l("el-form",{ref:"supplement",staticStyle:{width:"400px"},attrs:{model:e.supplementClient,rules:e.rule4,"label-width":"120px",inline:"inline"}},[l("el-form-item",{attrs:{label:"补款账号："}},[l("el-input",{attrs:{disabled:""},model:{value:e.supplementClient.userName,callback:function(t){e.$set(e.supplementClient,"userName",t)},expression:"supplementClient.userName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"当前余额："}},[l("el-input",{attrs:{disabled:"disabled"},model:{value:e.supplementClient.balance,callback:function(t){e.$set(e.supplementClient,"balance",t)},expression:"supplementClient.balance"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"补款条数：",prop:"count"}},[l("el-input",{model:{value:e.supplementClient.count,callback:function(t){e.$set(e.supplementClient,"count",t)},expression:"supplementClient.count"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"补款原因：",prop:"remark"}},[l("el-input",{model:{value:e.supplementClient.remark,callback:function(t){e.$set(e.supplementClient,"remark",t)},expression:"supplementClient.remark"}})],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.supplementClient.visiable=!1}}},[e._v("取消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.submitSupplement}},[e._v("保存")])],1)],1)],1):e._e()],1)},staticRenderFns:[]};var o=l("VU/8")(n,s,!1,function(e){l("cFuI")},"data-v-38830405",null);t.default=o.exports},cFuI:function(e,t){}});