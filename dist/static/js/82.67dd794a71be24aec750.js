webpackJsonp([82],{HvPF:function(e,t){},X3K4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("BO1k"),n=a.n(i),l=(a("jBVs"),a("uXZL"),{name:"A",data:function(){return{count:0,currentSize:30,currentPage:1,cid:"",userName:"",content:"",rank:"",fmmdd:new Date,options1:[{value:1,label:"所有"},{value:0,label:"测试任务"}],checkIn:!1,loading:!1,tableData:[],sum:"",totalPage:1e3,selection:"",rejectData:{visible:!1,cid:"",mapid:"",remark:"",mmdd:""},rejectCase:"",bulkRejectData:{visible:!1,reason:""},refundCase:{visiable:!1,cid:"",mapid:"",mmdd:"",count:1,remark:""},editCase:{visiable:!1,cid:"",userName:"",content:"",remark:"",mmdd:""},rule1:{reason:{required:!0,message:"请输入拒绝原因",trigger:"blur"}},rule2:{remark:{required:!0,message:"请输入拒绝原因",trigger:"blur"}},rule3:{remark:{required:!0,message:"请输入退费原因",trigger:"blur"}},rule4:{remark:{required:!0,message:"请输入备注",trigger:"blur"}}}},methods:{handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){this.tableData=[],this.checkIn=!0,this.loading=!0;var e=this;this.postRequest("admin/checkSms",{pageNum:this.currentPage,pageSize:this.currentSize,fmmdd:this.formatDate(this.fmmdd),cid:this.cid,userName:this.userName,content:this.content,rank:this.rank,sensitiveStatus:""}).then(function(t){console.log(t),e.loading=!1,e.count=t.data.data.page.totalCount;var a=!0,i=!1,l=void 0;try{for(var r,c=n()(t.data.data.data);!(a=(r=c.next()).done);a=!0){var s=r.value;e.tableData.push({userName:s.userName,serverNum:s.serverNum,content:s.content,contentLen:s.contentLen,definitetime:s.definitetime,cid:s.cid,cmcount:s.cmcount,cucount:s.cucount,ctcount:s.ctcount,cmgateway:s.cmgateway,cugateway:s.cmgateway,ctgateway:s.ctgateway,cmGatewayName:s.cmGatewayName,cuGatewayName:s.cuGatewayName,ctGatewayName:s.ctGatewayName,cmlist:s.cmlist,culist:s.culist,ctlist:s.ctlist,mapid:s.mapid,cm:s.cmGatewayName,cu:s.cuGatewayName,ct:s.ctGatewayName,cmCheck:!1,cuCheck:!1,ctCheck:!1,mmdd:s.mmdd,remark:s.remark,createtime:s.createtime,cnCheckSource:s.cnCheckSource})}}catch(e){i=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw l}}})},approveApply:function(e){var t=this,a=this;console.log(e),this.$confirm("确定审核通过该短信？","确认信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/smsCheckPass",{cid:e.cid,mapid:e.mapid,cm:!0===e.cmCheck?e.cm:"",cu:!0===e.cuCheck?e.cu:"",ct:!0===e.ctCheck?e.ct:"",mmdd:e.mmdd}).then(function(e){a.resAlert(e.data),a.checkData()})}).catch(function(){})},rejectApply:function(e){this.rejectData={visible:!0,cid:e.cid,mapid:e.mapid,remark:e.remark,mmdd:e.mmdd}},submitReject:function(){var e=this,t=this;this.$refs.reject.validate(function(a){if(!a)return!1;e.postRequest("admin/smsCheckNoPass",e.rejectData).then(function(e){t.resAlert(e.data),t.rejectData.visible=!1,t.checkData()})})},refund:function(e){this.refundCase={visiable:!0,cid:e.cid,mapid:e.mapid,count:1,remark:"",mmdd:e.mmdd}},submitRefund:function(){var e=this,t=this;this.$refs.refund.validate(function(a){if(!a)return!1;e.postRequest("admin/saveSmsCheckRefund",e.refundCase).then(function(a){e.refundCase.visiable=!1,t.resAlert(a.data),t.checkData()})})},edit:function(e){this.editCase={userName:e.userName,visiable:!0,cid:e.cid,content:e.content,mapid:e.mapid,mmdd:e.mmdd,remark:e.remark}},submitEdit:function(){var e=this,t=this;this.$refs.editCase.validate(function(a){if(!a)return!1;e.postRequest("admin/saveEditCheckSmsContent",e.editCase).then(function(e){t.resAlert(e.data),t.editCase.visiable=!1,t.checkData()})})},SCI:function(e){var t=this;this.$confirm("确定将该短信加入敏感短信？","确认信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/addSensitiveSms",{cis:e.cid,mapid:e.mapid,mmdd:e.mmdd}).then(function(e){t.resAlert(e.data)})})},handleSelectionChange:function(e){this.selection="";var t=!0,a=!1,i=void 0;try{for(var l,r=n()(e);!(t=(l=r.next()).done);t=!0){var c=l.value;this.selection+=c.cid+"_"+c.mapid+"_"+c.mmdd+"_"+c.cmgateway+"_"+c.cugateway+"_"+c.ctgateway+","}}catch(e){a=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw i}}this.selection=this.selection.substring(0,this.selection.length-1)},bulkApproveApply:function(){var e=this;""!==this.selection?this.postRequest("admin/smsBatchCheckPass",{ids:this.selection}).then(function(t){e.resAlert(t.data),e.checkData()}):this.$message.warning("请选择需要审核的记录")},bulkRejectApply:function(){""!==this.selection?this.bulkRejectData.visible=!0:this.$message.warning("请选择需要审核的记录")},submitBulkReject:function(){var e=this,t=this;this.$refs.bulkReject.validate(function(a){if(!a)return!1;e.postRequest("admin/smsBatchCheckNoPass",{ids:e.selection,remark:e.bulkRejectData.reason}).then(function(e){t.resAlert(e.data),t.checkData()})})},handleClose:function(e){this[e]=!1},handleClose2:function(e){this[e].visiable=!1}}}),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{attrs:{"label-width":"100px",inline:"inline"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.checkData(t):null}}},[a("el-form-item",{attrs:{label:"任务编号："}},[a("el-input",{model:{value:e.cid,callback:function(t){e.cid=t},expression:"cid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名："}},[a("el-input",{model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"短信内容："}},[a("el-input",{model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.rank,callback:function(t){e.rank=t},expression:"rank"}},e._l(e.options1,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"时间："}},[a("el-date-picker",{attrs:{type:"date"},model:{value:e.fmmdd,callback:function(t){e.fmmdd=t},expression:"fmmdd"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"fr",attrs:{type:"primary",plain:""},on:{click:e.checkData}},[e._v("查询")])],1)],1),e._v(" "),e.checkIn?a("el-card",[a("el-button",{attrs:{type:"text"},on:{click:e.bulkApproveApply}},[e._v("+批量审核通过")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.bulkRejectApply}},[e._v("+批量审核拒绝")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.approveApply(t.row)}}},[e._v("审核通过")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.rejectApply(t.row)}}},[e._v("审核拒绝")]),e._v(" "),a("el-dropdown",{attrs:{trigger:"click"}},[a("el-button",{attrs:{type:"text"}},[e._v("\n              其他管理\n              "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){e.edit(t.row)}}},[e._v("修改内容")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.SCI(t.row)}}},[e._v("加入敏感短信")])],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"特服号"}}),e._v(" "),a("el-table-column",{attrs:{width:"320px",label:"网关路由"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.cmcount>0?a("el-checkbox",{model:{value:t.row.cmCheck,callback:function(a){e.$set(t.row,"cmCheck",a)},expression:"scope.row.cmCheck"}},[e._v("移动：")]):e._e(),e._v(" "),t.row.cmcount>0?a("el-select",{attrs:{filterable:""},model:{value:t.row.cm,callback:function(a){e.$set(t.row,"cm",a)},expression:"scope.row.cm "}},[a("el-option",{attrs:{value:t.row.cmgateway,label:t.row.cmGatewayName+"_"+t.row.cmgateway}}),e._v(" "),e._l(t.row.cmlist,function(e){return a("el-option",{attrs:{label:e.gatewayname+"_"+e.gateway,value:e.gateway}})})],2):e._e(),e._v(" "),t.row.cucount>0?a("el-checkbox",{model:{value:t.row.cuCheck,callback:function(a){e.$set(t.row,"cuCheck",a)},expression:"scope.row.cuCheck"}},[e._v("联通：")]):e._e(),e._v(" "),t.row.cucount>0?a("el-select",{attrs:{filterable:""},model:{value:t.row.cu,callback:function(a){e.$set(t.row,"cu",a)},expression:"scope.row.cu "}},[a("el-option",{attrs:{value:t.row.cugateway,label:(null!==t.row.cuGatewayName?t.row.cuGatewayName:"")+"_"+t.row.cugateway}}),e._v(" "),e._l(t.row.culist,function(e){return a("el-option",{attrs:{label:e.gatewayname+"_"+e.gateway,value:e.gateway}})})],2):e._e(),e._v(" "),t.row.ctcount>0?a("el-checkbox",{model:{value:t.row.ctCheck,callback:function(a){e.$set(t.row,"ctCheck",a)},expression:"scope.row.ctCheck"}},[e._v("电信：")]):e._e(),e._v(" "),t.row.ctcount>0?a("el-select",{attrs:{filterable:""},model:{value:t.row.ct,callback:function(a){e.$set(t.row,"ct",a)},expression:"scope.row.ct"}},[a("el-option",{attrs:{value:t.row.ctgateway,label:t.row.ctGatewayName+"_"+t.row.ctgateway}}),e._v(" "),e._l(t.row.ctlist,function(e){return a("el-option",{attrs:{label:e.gatewayname+"_"+e.gateway,value:e.gateway}})})],2):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"短信内容",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(t.row.content)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contentLen",label:"长度"}}),e._v(" "),a("el-table-column",{attrs:{label:"号码数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.cmcount+t.row.cucount+t.row.ctcount))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"提交时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"definitetime",label:"定时时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cid",label:"任务编号"}}),e._v(" "),a("el-table-column",{attrs:{label:"原因",prop:"cnCheckSource"}})],1),e._v(" "),a("div",[a("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.currentPage,"page-size":e.currentSize,layout:"sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(t){e.currentPage=t},"update:pageSize":function(t){e.currentSize=t}}}),e._v(" "),a("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.count)+"条，")])],1),e._v(" "),a("el-dialog",{ref:"bulkReject",attrs:{title:"批量审核拒绝",visible:e.bulkRejectData.visible,width:"500px"},on:{"update:visible":function(t){e.$set(e.bulkRejectData,"visible",t)}}},[a("el-form",{ref:"bulkReject",staticStyle:{width:"400px"},attrs:{"label-width":"120px",inline:"inline",rules:e.rule1,model:e.bulkRejectData}},[a("el-form-item",{attrs:{label:"拒绝原因：",prop:"reason"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{type:"textarea"},model:{value:e.bulkRejectData.reason,callback:function(t){e.$set(e.bulkRejectData,"reason",t)},expression:"bulkRejectData.reason"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.bulkRejectData.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitBulkReject()}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{ref:"reject",attrs:{title:"审核拒绝",visible:e.rejectData.visible,width:"500px"},on:{"update:visible":function(t){e.$set(e.rejectData,"visible",t)}}},[a("el-form",{ref:"reject",staticStyle:{width:"400px"},attrs:{"label-width":"120px",inline:"inline",model:e.rejectData,rules:e.rule2}},[a("el-form-item",{attrs:{label:"任务编号："}},[a("el-input",{attrs:{disabled:"disabled"},model:{value:e.rejectData.cid,callback:function(t){e.$set(e.rejectData,"cid",t)},expression:"rejectData.cid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"拒绝原因：",prop:"remark"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{type:"textarea"},model:{value:e.rejectData.remark,callback:function(t){e.$set(e.rejectData,"remark",t)},expression:"rejectData.remark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rejectData.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitReject()}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{ref:"refundCase",attrs:{title:"审核退费",visible:e.refundCase.visiable,width:"500px"},on:{"update:visible":function(t){e.$set(e.refundCase,"visiable",t)}}},[a("el-form",{ref:"refund",staticStyle:{width:"400px"},attrs:{"label-width":"120px",inline:"inline",rules:e.rule3,model:e.refundCase}},[a("el-form-item",{attrs:{label:"任务编号："}},[a("el-input",{attrs:{disabled:"disabled"},model:{value:e.refundCase.cid,callback:function(t){e.$set(e.refundCase,"cid",t)},expression:"refundCase.cid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"退费条数："}},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:""},model:{value:e.refundCase.count,callback:function(t){e.$set(e.refundCase,"count",t)},expression:"refundCase.count"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"退费原因：",prop:"remark"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{type:"textarea"},model:{value:e.refundCase.remark,callback:function(t){e.$set(e.refundCase,"remark",t)},expression:"refundCase.remark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.handleClose2("refundCase")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitRefund}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改内容",visible:e.editCase.visiable,width:"500px"},on:{"update:visible":function(t){e.$set(e.editCase,"visiable",t)}}},[a("el-form",{ref:"editCase",staticStyle:{width:"400px"},attrs:{"label-width":"120px",inline:"inline",rules:e.rule4,model:e.editCase}},[a("el-form-item",{attrs:{label:"用户名："}},[a("el-input",{attrs:{disabled:"disabled"},model:{value:e.editCase.userName,callback:function(t){e.$set(e.editCase,"userName",t)},expression:"editCase.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务编号："}},[a("el-input",{attrs:{disabled:"disabled"},model:{value:e.editCase.cid,callback:function(t){e.$set(e.editCase,"cid",t)},expression:"editCase.cid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内容："}},[a("el-input",{staticStyle:{width:"220px"},attrs:{type:"textarea"},model:{value:e.editCase.content,callback:function(t){e.$set(e.editCase,"content",t)},expression:"editCase.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{type:"textarea"},model:{value:e.editCase.remark,callback:function(t){e.$set(e.editCase,"remark",t)},expression:"editCase.remark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.handleClose2("editCase")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitEdit}},[e._v("保存")])],1)],1)],1):e._e()],1)},staticRenderFns:[]};var c=a("VU/8")(l,r,!1,function(e){a("HvPF")},"data-v-26e65de1",null);t.default=c.exports}});