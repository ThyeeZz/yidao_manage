webpackJsonp([48],{JrmL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),l=a.n(i),o={name:"A",data:function(){return{sum:0,pageSize:30,pageNum:1,checkIn:!1,loading:!1,tableData:[],cmList:[],cuList:[],ctList:[],totalPage:1e3,userName:"",template:"",selection:"",modifyData:{visible:!1,id:"",userName:"",isRoute:"",cm:"",cu:"",ct:"",isMobileLimit:"",mobileLimit:"",limitMins:"",mobileLimitHour:"",mobileLimitDay:"",template:""},rule1:{mobileLimitHour:{required:!0,message:"请输入每小时号码限制",trigger:"blur"},mobileLimitDay:{required:!0,message:"请输入每天号码限制",trigger:"blur"}}}},methods:{handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},index:function(t){return t+1},checkData:function(){this.tableData=[],this.checkIn=!0,this.loading=!0;var t=this;this.postRequest("admin/listCheckTemplate",{userName:this.userName,template:this.template,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(e){t.loading=!1,t.sum=e.data.data.page.totalCount;var a=!0,i=!1,o=void 0;try{for(var n,r=l()(e.data.data.data);!(a=(n=r.next()).done);a=!0){var m=n.value;t.tableData.push({id:m.id,userName:m.userName,cnIsMobileLimit:m.cnIsMobileLimit,mobileLimit:m.mobileLimit,limitMins:m.limitMins,mobileLimitHour:m.mobileLimitHour,mobileLimitDay:m.mobileLimitDay,template:m.template,cnIsRouter:m.cnIsRouter,cmGatewayName:m.cmGatewayName,ctGatewayName:m.ctGatewayName,cuGatewayName:m.cuGatewayName,oper:m.oper,modifytime:m.modifytime,createtime:m.createtime})}}catch(t){i=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}})},handleSelectionChange:function(t){this.selection="";var e=!0,a=!1,i=void 0;try{for(var o,n=l()(t);!(e=(o=n.next()).done);e=!0){var r=o.value;this.selection+=r.id+","}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}this.selection=this.selection.substr(0,this.selection.length-1)},bulkDel:function(){var t=this,e=this;""!==this.selection?this.$confirm("确认批量删除勾选的客户模板吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/deleteBatchCheckTemplate",{ids:e.selection}).then(function(t){e.resAlert(t.data),e.checkData()})}).catch(function(){}):this.$message.warning("请选择需要删除的客户模板")},pre:function(){var t=this,e=this;""!==this.selection?this.$confirm("确认批量前置勾选的客户模板吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/updateBatchCheckTemplate",{ids:e.selection,operation:"before"}).then(function(t){e.resAlert(t.data),e.checkData()})}).catch(function(){}):this.$message.warning("请选择需要前置的客户模板")},postposition:function(){var t=this,e=this;""!==this.selection?this.$confirm("确认批量后置勾选的客户模板吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/updateBatchCheckTemplate",{ids:e.selection,operation:"after"}).then(function(t){e.resAlert(t.data),e.checkData()})}).catch(function(){}):this.$message.warning("请选择需要后置的客户模板")},modify:function(t){var e=this;this.postRequest("admin/editCheckTemplate",{id:t.id}).then(function(t){e.cmList=[],e.cuList=[],e.ctList=[];var a=!0,i=!1,o=void 0;try{for(var n,r=l()(t.data.data.cmList);!(a=(n=r.next()).done);a=!0){var m=n.value;1===m.status&&e.cmList.push({value:m.gateway,label:m.gatewayname})}}catch(t){i=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}var s=!0,c=!1,u=void 0;try{for(var d,p=l()(t.data.data.cuList);!(s=(d=p.next()).done);s=!0){var f=d.value;1===f.status&&e.cuList.push({value:f.gateway,label:f.gatewayname})}}catch(t){c=!0,u=t}finally{try{!s&&p.return&&p.return()}finally{if(c)throw u}}var b=!0,v=!1,y=void 0;try{for(var h,D=l()(t.data.data.ctList);!(b=(h=D.next()).done);b=!0){var g=h.value;1===g.status&&e.ctList.push({value:g.gateway,label:g.gatewayname})}}catch(t){v=!0,y=t}finally{try{!b&&D.return&&D.return()}finally{if(v)throw y}}e.modifyData={visible:!0,id:t.data.data.template.id,userName:t.data.data.template.userName,isRoute:t.data.data.template.isRoute,cm:0===t.data.data.template.cm?t.data.data.template.cmGatewayName:t.data.data.template.cm,cu:0===t.data.data.template.cu?t.data.data.template.cuGatewayName:t.data.data.template.cu,ct:0===t.data.data.template.ct?t.data.data.template.ctGatewayName:t.data.data.template.ct,isMobileLimit:t.data.data.template.isMobileLimit,mobileLimit:t.data.data.template.mobileLimit,limitMins:t.data.data.template.limitMins,mobileLimitHour:t.data.data.template.mobileLimitHour,mobileLimitDay:t.data.data.template.mobileLimitDay,template:t.data.data.template.template}})},submitModify:function(){var t=this,e=this;this.$refs.form1.validate(function(a){if(!a)return!1;t.postRequest("admin/saveEditCheckTemplate",t.modifyData).then(function(t){e.checkData(),e.modifyData.visible=!1,e.resAlert(t.data)})})},del:function(t){var e=this,a=this;this.$confirm("确认删除【"+t.userName+"】?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.postRequest("admin/deleteCheckTemplate",{id:t.id}).then(function(t){a.resAlert(t.data),a.checkData()})}).catch(function(){})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-form",{attrs:{inline:"inline","label-width":"120px"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.checkData(e):null}}},[a("el-form-item",{attrs:{label:"客户账号："}},[a("el-input",{model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板内容："}},[a("el-input",{model:{value:t.template,callback:function(e){t.template=e},expression:"template"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"fr",attrs:{type:"primary",plain:""},on:{click:t.checkData}},[t._v("查询")])],1)],1),t._v(" "),t.checkIn?a("el-card",[a("el-button",{attrs:{type:"text"},on:{click:t.bulkDel}},[t._v("+批量客户模板删除")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.pre}},[t._v("+批量短信签名前置")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.postposition}},[t._v("+批量短信签名后置")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:t.tableData,stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",width:"50px",type:"index",index:t.index}}),t._v(" "),a("el-table-column",{attrs:{width:"150px",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.modify(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.del(e.row)}}},[t._v("删除")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"客户账号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cnIsMobileLimit",label:"号码限制"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobileLimit",label:"限制次数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"limitMins",label:"时间段（分）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobileLimitHour",label:"每小时号码限制"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobileLimitDay",label:"每天号码限制"}}),t._v(" "),a("el-table-column",{attrs:{prop:"template",label:"模板内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cnIsRouter",label:"模板路由"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",prop:"cmGatewayName",label:"移动网关"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",prop:"cuGatewayName",label:"联通网关"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",prop:"ctGatewayName",label:"电信网关"}}),t._v(" "),a("el-table-column",{attrs:{prop:"oper",label:"操作人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"modifytime",label:"修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}})],1),t._v(" "),a("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":t.pageNum,"page-size":t.pageSize,layout:"sizes, prev, pager, next, jumper",total:t.sum},on:{"size-change":t.handleSizeChange,"current-change":t.handlePageChange,"update:currentPage":function(e){t.pageNum=e},"update:pageSize":function(e){t.pageSize=e}}}),t._v(" "),a("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[t._v("共"+t._s(t.sum)+"条，")])],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"模板修改",visible:t.modifyData.visible,width:"500px"},on:{"update:visible":function(e){t.$set(t.modifyData,"visible",e)}}},[a("el-form",{ref:"form1",staticStyle:{width:"400px"},attrs:{"label-width":"150px",model:t.modifyData,rules:t.rule1}},[a("el-form-item",{attrs:{label:"客户账号："}},[a("el-input",{attrs:{disabled:""},model:{value:t.modifyData.userName,callback:function(e){t.$set(t.modifyData,"userName",e)},expression:"modifyData.userName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板路由："}},[a("el-radio-group",{model:{value:t.modifyData.isRoute,callback:function(e){t.$set(t.modifyData,"isRoute",e)},expression:"modifyData.isRoute"}},[a("el-radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"移动网关："}},[a("el-select",{attrs:{filterable:""},model:{value:t.modifyData.cm,callback:function(e){t.$set(t.modifyData,"cm",e)},expression:"modifyData.cm"}},t._l(t.cmList,function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"联通网关："}},[a("el-select",{attrs:{filterable:""},model:{value:t.modifyData.cu,callback:function(e){t.$set(t.modifyData,"cu",e)},expression:"modifyData.cu"}},t._l(t.cuList,function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"电信网关："}},[a("el-select",{attrs:{filterable:""},model:{value:t.modifyData.ct,callback:function(e){t.$set(t.modifyData,"ct",e)},expression:"modifyData.ct"}},t._l(t.ctList,function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"号码限制："}},[a("el-radio-group",{model:{value:t.modifyData.isMobileLimit,callback:function(e){t.$set(t.modifyData,"isMobileLimit",e)},expression:"modifyData.isMobileLimit"}},[a("el-radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"限制条数："}},[a("el-input",{model:{value:t.modifyData.mobileLimit,callback:function(e){t.$set(t.modifyData,"mobileLimit",e)},expression:"modifyData.mobileLimit"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"时间间隔："}},[a("el-input",{model:{value:t.modifyData.limitMins,callback:function(e){t.$set(t.modifyData,"limitMins",e)},expression:"modifyData.limitMins"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"每小时号码限制：",prop:"mobileLimitHour"}},[a("el-input",{model:{value:t.modifyData.mobileLimitHour,callback:function(e){t.$set(t.modifyData,"mobileLimitHour",e)},expression:"modifyData.mobileLimitHour"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"每天号码限制：",prop:"mobileLimitDay"}},[a("el-input",{model:{value:t.modifyData.mobileLimitDay,callback:function(e){t.$set(t.modifyData,"mobileLimitDay",e)},expression:"modifyData.mobileLimitDay"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.modifyData.template,callback:function(e){t.$set(t.modifyData,"template",e)},expression:"modifyData.template"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.modifyData.visible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitModify}},[t._v("确认修改")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,n,!1,function(t){a("rASR")},"data-v-5e41a7dc",null);e.default=r.exports},rASR:function(t,e){}});